var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function r(e){e.forEach(n)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function s(e){return null==e?"":e}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function g(){return f(" ")}function h(){return f("")}function v(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?null:+e}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function x(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function k(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let A;function S(e){A=e}function C(){if(!A)throw new Error("Function called outside component initialization");return A}function E(){const e=C();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const r=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);l.slice().forEach((t=>{t.call(e,r)}))}}}function T(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const R=[],L=[],q=[],_=[],M=Promise.resolve();let W=!1;function N(){W||(W=!0,M.then(G))}function B(){return N(),M}function O(e){q.push(e)}function H(e){_.push(e)}let I=!1;const D=new Set;function G(){if(!I){I=!0;do{for(let e=0;e<R.length;e+=1){const t=R[e];S(t),P(t.$$)}for(S(null),R.length=0;L.length;)L.pop()();for(let e=0;e<q.length;e+=1){const t=q[e];D.has(t)||(D.add(t),t())}q.length=0}while(R.length);for(;_.length;)_.pop()();W=!1,I=!1,D.clear()}}function P(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(O)}}const j=new Set;let J;function z(){J={r:0,c:[],p:J}}function F(){J.r||r(J.c),J=J.p}function K(e,t){e&&e.i&&(j.delete(e),e.i(t))}function Z(e,t,n,l){if(e&&e.o){if(j.has(e))return;j.add(e),J.c.push((()=>{j.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function V(e,t){const n={},l={},r={$$scope:1};let o=e.length;for(;o--;){const a=e[o],i=t[o];if(i){for(const e in a)e in i||(l[e]=1);for(const e in i)r[e]||(n[e]=i[e],r[e]=1);e[o]=i}else for(const e in a)r[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}function U(e){return"object"==typeof e&&null!==e?e:{}}function X(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function Y(e){e&&e.c()}function Q(e,t,l){const{fragment:a,on_mount:i,on_destroy:s,after_update:c}=e.$$;a&&a.m(t,l),O((()=>{const t=i.map(n).filter(o);s?s.push(...t):r(t),e.$$.on_mount=[]})),c.forEach(O)}function ee(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function te(t,n,o,a,i,s,c=[-1]){const u=A;S(t);const m=n.props||{},p=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:i,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:c,skip_bound:!1};let f=!1;if(p.ctx=o?o(t,m,((e,n,...l)=>{const r=l.length?l[0]:n;return p.ctx&&i(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),f&&function(e,t){-1===e.$$.dirty[0]&&(R.push(e),N(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),f=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(d)}else p.fragment&&p.fragment.c();n.intro&&K(t.$$.fragment),Q(t,n.target,n.anchor),G()}S(u)}class ne{$destroy(){ee(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const le=[];function re(e,t){return{subscribe:oe(e,t).subscribe}}function oe(t,n=e){let l;const r=[];function o(e){if(a(t,e)&&(t=e,l)){const e=!le.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),le.push(n,t)}if(e){for(let e=0;e<le.length;e+=2)le[e][0](le[e+1]);le.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(a,i=e){const s=[a,i];return r.push(s),1===r.length&&(l=n(o)||e),a(t),()=>{const e=r.indexOf(s);-1!==e&&r.splice(e,1),0===r.length&&(l(),l=null)}}}}function ae(t,n,l){const a=!Array.isArray(t),s=a?[t]:t,c=n.length<2;return re(l,(t=>{let l=!1;const u=[];let d=0,m=e;const p=()=>{if(d)return;m();const l=n(a?u[0]:u,t);c?t(l):m=o(l)?l:e},f=s.map(((e,t)=>i(e,(e=>{u[t]=e,d&=~(1<<t),l&&p()}),(()=>{d|=1<<t}))));return l=!0,p(),function(){r(f),m()}}))}function ie(e){let n,l,r;const o=[e[2]];var a=e[0];function i(e){let n={};for(let e=0;e<o.length;e+=1)n=t(n,o[e]);return{props:n}}return a&&(n=new a(i()),n.$on("routeEvent",e[7])),{c(){n&&Y(n.$$.fragment),l=h()},m(e,t){n&&Q(n,e,t),u(e,l,t),r=!0},p(e,t){const r=4&t?V(o,[U(e[2])]):{};if(a!==(a=e[0])){if(n){z();const e=n;Z(e.$$.fragment,1,0,(()=>{ee(e,1)})),F()}a?(n=new a(i()),n.$on("routeEvent",e[7]),Y(n.$$.fragment),K(n.$$.fragment,1),Q(n,l.parentNode,l)):n=null}else a&&n.$set(r)},i(e){r||(n&&K(n.$$.fragment,e),r=!0)},o(e){n&&Z(n.$$.fragment,e),r=!1},d(e){e&&d(l),n&&ee(n,e)}}}function se(e){let n,l,r;const o=[{params:e[1]},e[2]];var a=e[0];function i(e){let n={};for(let e=0;e<o.length;e+=1)n=t(n,o[e]);return{props:n}}return a&&(n=new a(i()),n.$on("routeEvent",e[6])),{c(){n&&Y(n.$$.fragment),l=h()},m(e,t){n&&Q(n,e,t),u(e,l,t),r=!0},p(e,t){const r=6&t?V(o,[2&t&&{params:e[1]},4&t&&U(e[2])]):{};if(a!==(a=e[0])){if(n){z();const e=n;Z(e.$$.fragment,1,0,(()=>{ee(e,1)})),F()}a?(n=new a(i()),n.$on("routeEvent",e[6]),Y(n.$$.fragment),K(n.$$.fragment,1),Q(n,l.parentNode,l)):n=null}else a&&n.$set(r)},i(e){r||(n&&K(n.$$.fragment,e),r=!0)},o(e){n&&Z(n.$$.fragment,e),r=!1},d(e){e&&d(l),n&&ee(n,e)}}}function ce(e){let t,n,l,r;const o=[se,ie],a=[];function i(e,t){return e[1]?0:1}return t=i(e),n=a[t]=o[t](e),{c(){n.c(),l=h()},m(e,n){a[t].m(e,n),u(e,l,n),r=!0},p(e,[r]){let s=t;t=i(e),t===s?a[t].p(e,r):(z(),Z(a[s],1,1,(()=>{a[s]=null})),F(),n=a[t],n?n.p(e,r):(n=a[t]=o[t](e),n.c()),K(n,1),n.m(l.parentNode,l))},i(e){r||(K(n),r=!0)},o(e){Z(n),r=!1},d(e){a[t].d(e),e&&d(l)}}}function ue(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let l="";return n>-1&&(l=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:l}}const de=re(null,(function(e){e(ue());const t=()=>{e(ue())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}})),me=ae(de,(e=>e.location));ae(de,(e=>e.querystring));async function pe(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");await B(),history.replaceState({scrollX:window.scrollX,scrollY:window.scrollY},void 0,void 0),window.location.hash=("#"==e.charAt(0)?"":"#")+e}async function fe(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");await B();const t=("#"==e.charAt(0)?"":"#")+e;try{window.history.replaceState(void 0,void 0,t)}catch(e){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function ge(e,t,n){let{routes:l={}}=t,{prefix:r=""}=t,{restoreScrollState:o=!1}=t;class a{constructor(e,t){if(!t||"function"!=typeof t&&("object"!=typeof t||!0!==t._sveltesparouter))throw Error("Invalid component object");if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:l}=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,l,r,o,a=[],i="",s=e.split("/");for(s[0]||s.shift();r=s.shift();)"*"===(n=r[0])?(a.push("wild"),i+="/(.*)"):":"===n?(l=r.indexOf("?",1),o=r.indexOf(".",1),a.push(r.substring(1,~l?l:~o?o:r.length)),i+=~l&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(i+=(~l?"?":"")+"\\"+r.substring(o))):i+="/"+r;return{keys:a,pattern:new RegExp("^"+i+(t?"(?=$|/)":"/?$"),"i")}}(e);this.path=e,"object"==typeof t&&!0===t._sveltesparouter?(this.component=t.component,this.conditions=t.conditions||[],this.userData=t.userData,this.props=t.props||{}):(this.component=()=>Promise.resolve(t),this.conditions=[],this.props={}),this._pattern=n,this._keys=l}match(e){if(r)if("string"==typeof r){if(!e.startsWith(r))return null;e=e.substr(r.length)||"/"}else if(r instanceof RegExp){const t=e.match(r);if(!t||!t[0])return null;e=e.substr(t[0].length)||"/"}const t=this._pattern.exec(e);if(null===t)return null;if(!1===this._keys)return t;const n={};let l=0;for(;l<this._keys.length;){try{n[this._keys[l]]=decodeURIComponent(t[l+1]||"")||null}catch(e){n[this._keys[l]]=null}l++}return n}async checkConditions(e){for(let t=0;t<this.conditions.length;t++)if(!await this.conditions[t](e))return!1;return!0}}const i=[];l instanceof Map?l.forEach(((e,t)=>{i.push(new a(t,e))})):Object.keys(l).forEach((e=>{i.push(new a(e,l[e]))}));let s=null,c=null,u={};const d=E();async function m(e,t){await B(),d(e,t)}let p=null;var f;o&&(window.addEventListener("popstate",(e=>{p=e.state&&e.state.scrollY?e.state:null})),f=()=>{p?window.scrollTo(p.scrollX,p.scrollY):window.scrollTo(0,0)},C().$$.after_update.push(f));let g=null,h=null;return de.subscribe((async e=>{g=e;let t=0;for(;t<i.length;){const l=i[t].match(e.location);if(!l){t++;continue}const r={route:i[t].path,location:e.location,querystring:e.querystring,userData:i[t].userData};if(!await i[t].checkConditions(r))return n(0,s=null),h=null,void m("conditionsFailed",r);m("routeLoading",Object.assign({},r));const o=i[t].component;if(h!=o){o.loading?(n(0,s=o.loading),h=o,n(1,c=o.loadingParams),n(2,u={}),m("routeLoaded",Object.assign({},r,{component:s,name:s.name}))):(n(0,s=null),h=null);const t=await o();if(e!=g)return;n(0,s=t&&t.default||t),h=o}return l&&"object"==typeof l&&Object.keys(l).length?n(1,c=l):n(1,c=null),n(2,u=i[t].props),void m("routeLoaded",Object.assign({},r,{component:s,name:s.name}))}n(0,s=null),h=null})),e.$$set=e=>{"routes"in e&&n(3,l=e.routes),"prefix"in e&&n(4,r=e.prefix),"restoreScrollState"in e&&n(5,o=e.restoreScrollState)},e.$$.update=()=>{32&e.$$.dirty&&(history.scrollRestoration=o?"manual":"auto")},[s,c,u,l,r,o,function(t){T(e,t)},function(t){T(e,t)}]}class he extends ne{constructor(e){super(),te(this,e,ge,ce,a,{routes:3,prefix:4,restoreScrollState:5})}}let ve=localStorage.getItem("crews");ve||(console.log("Init crews"),localStorage.setItem("crews",JSON.stringify([])),ve=localStorage.getItem("crews"));let we=e=>{Array.isArray(e)&&localStorage.setItem("crews",JSON.stringify(e))};var ye={crews:JSON.parse(ve),save:we,exportCrew:e=>{let t=JSON.stringify(ye.crews.find((t=>t.id===e)));return btoa(t)},importCrew:e=>{if(e&&e.name&&e.faction&&e.id)return we(e),e;if(e){let t=JSON.parse(atob(e));if(t.name&&t.faction&&t.id)return ye.crews.push(t),we(ye.crews),t}}};function be(t){let n,l,a,i,s,m,g,h,y,b;return{c(){n=p("span"),l=p("a"),l.textContent="Home",a=f(" |\n  "),i=p("a"),i.textContent="New Crew",s=f(" |\n  "),m=p("a"),m.textContent="Import",g=f(" |\n  "),h=p("a"),h.textContent="Tables",w(l,"href","#/"),w(i,"href","#/crew/new/edit"),w(m,"href","#/import"),w(h,"href","#/tables"),w(n,"class","no-print")},m(e,r){u(e,n,r),c(n,l),c(n,a),c(n,i),c(n,s),c(n,m),c(n,g),c(n,h),y||(b=[v(l,"click",(function(){o(t[0])&&t[0].apply(this,arguments)})),v(i,"click",(function(){o(t[0])&&t[0].apply(this,arguments)})),v(m,"click",(function(){o(t[0])&&t[0].apply(this,arguments)})),v(h,"click",(function(){o(t[0])&&t[0].apply(this,arguments)}))],y=!0)},p(e,[n]){t=e},i:e,o:e,d(e){e&&d(n),y=!1,r(b)}}}function $e(e,t,n){let{click:l=(()=>{})}=t;return e.$$set=e=>{"click"in e&&n(0,l=e.click)},[l]}class xe extends ne{constructor(e){super(),te(this,e,$e,be,a,{click:0})}}function ke(e,t,n){const l=e.slice();return l[8]=t[n],l}function Ae(e){let t,n,l,r,o,a,i,s,m,h,y,$,x,k,A,S,C,E,T=e[8].name+"",R=e[8].k+"";function L(){return e[2](e[8])}return{c(){t=p("li"),n=p("a"),l=p("img"),a=g(),i=p("img"),m=g(),h=p("a"),y=f(T),$=f(" ("),x=f(R),k=f(" K)"),S=g(),l.src!==(r="./edit.png")&&w(l,"src","./edit.png"),w(l,"width","16"),w(l,"alt","Edit"),w(n,"href",o="#/crew/"+e[8].id+"/edit"),i.src!==(s="./remove.png")&&w(i,"src","./remove.png"),w(i,"width","16"),w(i,"alt","Delete"),w(h,"href",A="#/crew/"+e[8].id+"/view")},m(e,r){u(e,t,r),c(t,n),c(n,l),c(t,a),c(t,i),c(t,m),c(t,h),c(h,y),c(h,$),c(h,x),c(h,k),c(t,S),C||(E=v(i,"click",L),C=!0)},p(t,l){e=t,1&l&&o!==(o="#/crew/"+e[8].id+"/edit")&&w(n,"href",o),1&l&&T!==(T=e[8].name+"")&&b(y,T),1&l&&R!==(R=e[8].k+"")&&b(x,R),1&l&&A!==(A="#/crew/"+e[8].id+"/view")&&w(h,"href",A)},d(e){e&&d(t),C=!1,E()}}}function Se(e){let t,n,l,r;t=new xe({});let o=e[0],a=[];for(let t=0;t<o.length;t+=1)a[t]=Ae(ke(e,o,t));return{c(){Y(t.$$.fragment),n=g(),l=p("ul");for(let e=0;e<a.length;e+=1)a[e].c();w(l,"class","svelte-yx0b43")},m(e,o){Q(t,e,o),u(e,n,o),u(e,l,o);for(let e=0;e<a.length;e+=1)a[e].m(l,null);r=!0},p(e,[t]){if(3&t){let n;for(o=e[0],n=0;n<o.length;n+=1){const r=ke(e,o,n);a[n]?a[n].p(r,t):(a[n]=Ae(r),a[n].c(),a[n].m(l,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},i(e){r||(K(t.$$.fragment,e),r=!0)},o(e){Z(t.$$.fragment,e),r=!1},d(e){ee(t,e),e&&d(n),e&&d(l),m(a,e)}}}function Ce(e,t,n){let l=ye.crews;function r(e){var t=l.findIndex((t=>t.id===e.id));-1!==t&&l.splice(t,1),ye.save(l),n(0,l=ye.crews)}return[l,r,e=>r(e)]}function Ee(e){let t,n;return{c(){t=p("span"),n=f(e[0])},m(e,l){u(e,t,l),c(t,n)},p(e,t){1&t&&b(n,e[0])},d(e){e&&d(t)}}}function Te(e){let t;function n(e,t){return"text"===e[2]?qe:"number"===e[2]?Le:"textarea"===e[2]?Re:void 0}let l=n(e),r=l&&l(e);return{c(){r&&r.c(),t=h()},m(e,n){r&&r.m(e,n),u(e,t,n)},p(e,o){l===(l=n(e))&&r?r.p(e,o):(r&&r.d(1),r=l&&l(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r&&r.d(e),e&&d(t)}}}function Re(e){let t,n,l;return{c(){t=p("textarea"),w(t,"rows",e[4]),w(t,"class","svelte-nor9cs")},m(r,a){u(r,t,a),$(t,e[0]),n||(l=[v(t,"input",e[7]),v(t,"change",(function(){o(e[3])&&e[3].apply(this,arguments)}))],n=!0)},p(n,l){e=n,16&l&&w(t,"rows",e[4]),1&l&&$(t,e[0])},d(e){e&&d(t),n=!1,r(l)}}}function Le(e){let t,n,l;return{c(){t=p("input"),w(t,"type","number"),w(t,"class","svelte-nor9cs")},m(r,a){u(r,t,a),$(t,e[0]),n||(l=[v(t,"input",e[6]),v(t,"change",(function(){o(e[3])&&e[3].apply(this,arguments)}))],n=!0)},p(n,l){e=n,1&l&&y(t.value)!==e[0]&&$(t,e[0])},d(e){e&&d(t),n=!1,r(l)}}}function qe(e){let t,n,l;return{c(){t=p("input"),w(t,"class","svelte-nor9cs")},m(r,a){u(r,t,a),$(t,e[0]),n||(l=[v(t,"input",e[5]),v(t,"change",(function(){o(e[3])&&e[3].apply(this,arguments)}))],n=!0)},p(n,l){e=n,1&l&&t.value!==e[0]&&$(t,e[0])},d(e){e&&d(t),n=!1,r(l)}}}function _e(t){let n;function l(e,t){return e[1]?Te:Ee}let r=l(t),o=r(t);return{c(){o.c(),n=h()},m(e,t){o.m(e,t),u(e,n,t)},p(e,[t]){r===(r=l(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){o.d(e),e&&d(n)}}}function Me(e,t,n){let{value:l}=t,{edit:r=!1}=t,{type:o="text"}=t,{change:a=(()=>{})}=t,{rows:i=5}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"edit"in e&&n(1,r=e.edit),"type"in e&&n(2,o=e.type),"change"in e&&n(3,a=e.change),"rows"in e&&n(4,i=e.rows)},[l,r,o,a,i,function(){l=this.value,n(0,l)},function(){l=y(this.value),n(0,l)},function(){l=this.value,n(0,l)}]}class We extends ne{constructor(e){super(),te(this,e,Me,_e,a,{value:0,edit:1,type:2,change:3,rows:4})}}function Ne(e){let t,n,l,r;return{c(){t=p("img"),w(t,"alt","Remove"),t.src!==(n="./remove.png")&&w(t,"src","./remove.png"),w(t,"width","12")},m(n,a){u(n,t,a),l||(r=v(t,"click",(function(){o(e[1])&&e[1].apply(this,arguments)})),l=!0)},p(t,n){e=t},d(e){e&&d(t),l=!1,r()}}}function Be(t){let n,l=t[0]&&Ne(t);return{c(){l&&l.c(),n=h()},m(e,t){l&&l.m(e,t),u(e,n,t)},p(e,[t]){e[0]?l?l.p(e,t):(l=Ne(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&d(n)}}}function Oe(e,t,n){let{edit:l}=t,{click:r=(()=>{})}=t;return e.$$set=e=>{"edit"in e&&n(0,l=e.edit),"click"in e&&n(1,r=e.click)},[l,r]}class He extends ne{constructor(e){super(),te(this,e,Oe,Be,a,{edit:0,click:1})}}var Ie=[{id:0,name:"Military",description:"The Zone Enforcement Unit is tasked with containing the Zone and interdicting the flow of illegal Salvage and dangerous artifacts. Ironic as it's the Military that secretly allows and assists in the flow of said items. Military Crews start with three free pieces of Equipment: two Red Dot Sights and one load of Hot Load Ammo. They get a 20% discount when purchasing new Weapons, and can recruit Rookies at 25% less of the normal price later in the game.",allies:[1],enemies:[2,4],discounts:[{type:"Weapon",value:20,times:-1},{type:"Rookie recruit",value:25,times:-1}],startingEquipment:[4,4,8]},{id:1,name:"Scientists",description:"Affiliated with the government and several large private research agencies, the Scientist faction studies the Zone, hoping to understand - and control - its causes and effects. Although technically protected by the military's Zone Enforcement Unit, they  frequently hire teams to perform elemental research in dangerous areas, run errands, and provide security. Scientist crews start with a free Detector, one free Med-Kit and one free Tool Kit. They receive a 25% discount when purchasing Med-Kits, Tool Kits, Gas Masks and Binoculars at The Stalls, and can hire two Hardened recruits at 50% the normal price later in the game.",allies:[0,3,5],enemies:[],discounts:[{type:"Hardened recruit",value:50,times:2},{type:"Med-Kits, Tool Kits, Gas Masks and Binoculars",value:25,times:-1}],startingEquipment:[5,3,6]},{id:2,name:"Bandits",description:"Vultures, jackals, scavengers, vermin, maggots... the epithets are endless. These thugs rob, harass and extort anyone and everyone they can. Some Bandits crews are street gangs seeking new turf, others are extensions of organized crime syndicates muscling in on the lucrative flow of goods in and out of the Zone. It's all about money. Bandit crews start with two free doses of Electric Juice and a Chest Rig. They always receive one free Molotov Cocktail when visiting The Stalls. Later in the game, they can hire one Veteran recruit at 25% less the normal price and can always recruit Rookies at 50% normal price.",allies:[],enemies:[0,1,5],discounts:[{type:"Molotov Cocktail",value:100,times:-2},{type:"Veteran recruit",value:25,times:1},{type:"Rookie recruit",value:50,times:-1}],startingEquipment:[1,1,10]},{id:3,name:"Independents",description:"Everyone's got to make a living and this bunch plies their trade in the Zone. Whether it's scavenging for artifacts, acting as a guide to researchers and thrill-seeking tourists, or hunting mutants for bounty, Independents want to be lefty alone and get on with their lives. Independents receive a free Gas Mask, Med-Kit, and Scope to start, and get a 20% discount on Basic Equipment items at The Stalls. Independents can always add Hardened recruits at 30% less the going rate.",allies:[1,5],enemies:[],discounts:[{type:"Basic Equipment",value:20,times:-1},{type:"Hardened Recruit",value:30,times:-1}],startingEquipment:[2,3,9]},{id:4,name:"Cultists",description:"'If you find a kettle of crazy, it's best not to stir it'. Well, the Zone is a whole cauldron of madness and there's no shortage of folks willing to whip it to a boil. Cultists believe the Zone is a mystical, mysterious place and have devoted their lives to see it grow and spread. Technically at odds with everyone else, Cultists nonetheless have uneasy alliances with Scientists and Traders, passing valuable information and rare artifacts for profit. Cultists receive a free set of NODs and two Med-Kits when starting. They receive a 20% discount on all Advanced Equipment items at The Stalls, and when hiring new Crew members later in the campaign, their first Veteran and Rookie recruits are free.",allies:[5],enemies:[0],discounts:[{type:"Advanced Equipment",value:20,times:-1},{type:"Veteran Recruit",value:100,times:1},{type:"Rookie Recruit",value:100,times:1}],startingEquipment:[7,3,3]},{id:5,name:"Traders",description:"Someone has to grease the wheels of commerce and these are the guys who keep it all moving. Traders pass goods and information in and out of the Zone and among the various Factions. This makes them extremely useful, as well as a frequent target of Bandits. Because of this, Traders are always looking for reliable security. Traders do not receive any additional starting Gear. However, they receive a permanent 40% discount on all items at The Stalls and can hire Veteran recruits at a 25% discount.",allies:[1,4],enemies:[2],discounts:[{type:"All Items",value:40,times:-1},{type:"Veteran Recruit",value:25,times:-1}],startingEquipment:[]}],De=[{id:0,name:"Rookie",wounds:1,movement:5,combatAbility:4,will:4,armor:1,options:{rangedWeapon:1,meleeWeapon:1,grenade:2,basicEquipment:1,skill:0},skills:[],cost:1},{id:1,name:"Hardened",wounds:1,movement:6,combatAbility:5,will:5,armor:2,options:{rangedWeapon:1,meleeWeapon:1,grenade:2,basicEquipment:2,skill:1},skills:[],cost:2},{id:2,name:"Veteran",wounds:1,movement:6,combatAbility:6,will:6,armor:2,options:{rangedWeapon:1,meleeWeapon:1,grenade:2,basicEquipment:3,skill:2},skills:[],cost:3},{id:3,name:"Leader",wounds:2,movement:6,combatAbility:6,will:7,armor:3,options:{rangedWeapon:1,meleeWeapon:1,grenade:2,basicEquipment:3,skill:1},skills:[5],cost:3}],Ge=[{id:0,name:"Bone Doc",description:"Probably attended Med-school for a semester or had some combat medic training in the military, a Bone Doc can double up on Med-Kits when assigning them in the Equipment Slots, meaning that two can be carried per slot. When a Bone Doc applies a Med-Kit to himself or Allied unit, the Wound is replaced with one Pinned Counter rather than two.",effects:["2 Med-Kits allowed per slot.","Med-Kits replace 1 Wound with 1 Pinned Counter on Allies and self."]},{id:1,name:"Fuse Cutter",description:"The explosives expert, the Fuse Cutter can carry up to three Hand Grenades, Molotov Cocktails or Satchel Charges, instead of the standard two. The Fuse Cutter also receives a +2 to all Explosives-related Skill Checks like de-fusing an IED or booby-trapped door.",effects:["Can carry up to 3 Hand Grenades, Molotov Cocktails or Satchel Charges.","+2 to all Explosives-related Skill Checks."]},{id:2,name:"Hard",description:"Walking that fine line between bravery and stupidity, this character ignores their first Pinned result and always receives a +1 bonus to their Will Stat when rolling for Deflected Hits.",effects:["Ignores their first Pinned result.","+1 to Will when rolling for Deflected hits."]},{id:3,name:"Hustle",description:'Quick on their feet, whenever this model spends two consecutive actions to move, they receive an extra 2" to the total. So a Hardened trooper can move 14" with two back-to-back Move Actions rather than the standard 12".',effects:['+2" movement when spending 2 consecutive Actions to move.']},{id:4,name:"Knife Man",description:"Knife men function best up close and personal. They receive a +1 to all Melee Combat rolls and, if appropriately armed, may fire/use two Melee weapons in close combat for one Action.",effects:["+1 to Melee Combat Rolls.","May fire/use 2 equipped Melee Weapons in close combat as 1 Action."]},{id:5,name:"Leader",description:"Leaders grant a +1 bonus to Will/Rally rolls for allied units in Line of Sight to the leader figure. Leaders also have a special 'Order' Action that allows them to 'transfer' their Actions to other members of their squad. The recepient must be within 12\" and in Line of Sight of the Leader figure, and must immediately perform the Ordered Action. Any effects of this transferred Action/s must be taken and resolved before the Leader can perform any more Actions.",effects:["+1 to Will/Rally rolls for allied units in LoS of Leader.",'Can Order (Transfer Action to) other units in the crew that are in LoS and within 12" of Leader.']},{id:6,name:"Scrounger",description:"Some guys have a knack for finding stuff. Scroungers can Search a Hot Spot twice instead of just once. Each Search is a separate Action, but they double your chance at finding something useful.",effects:["Can Search Hot Spot twice. Each Search is a separate Action."]},{id:7,name:"Steady Hands",description:"Maybe their grandfather took them hunting, perhaps they received some special Military training, either way, these shooters get a +1 to all Ranged Attack rolls. This Ability stack with the Aim bonus modifiers and any appropriate Gear.",effects:["+1 to Ranged Attack Rolls."]},{id:8,name:"Unload",description:"When this model spends to consecutive Actions on a Ranged Attack with an appropriate ranged combat weapon, such as an Assault Rife, against a single target, it adds two bonus dice to the combined Firepower roll. Unload represents the model emptying the weapons' magazine in one go. After using the Unload ability, the model must spend 1 Action to 'reload' the weapon before it can be fired again.",effects:["+2 dice when spending 2 consecutive Actions on Ranged Attack. Must spend a Action on Reload before firing the weapon again."]},{id:9,name:"Wrench",description:"This is the one who's always tinkering with the GAZ engine, modding the gas tube on their AK, or jury rigging the camp stove. Handy with anything mechanical, a Wrench gets a +2 to any Mechanical-Related Skill checks.",effects:["+2 to any Mechanical-Related Skill checks."]}],Pe=[{id:0,name:"Basic BDU/Foul Weather Gear",armor:0,description:"No Armor Save (except the Critical Success Roll of 1). Counts as an Obscured Target from Ranged Attacks when in Cover.",rules:["Obscured Target when in Cover"]},{id:1,name:"Salvaged/Improvised Body Armor",armor:3,description:"Scrounged ballistic nylon and ceramic plates sewn into tactical vests, battle dress, and foul weather clothing provide Armor 3 and renders the wearer an Obscured Target when in Cover. Most Zone Hostile Bandits and Raiders employ Improvised Body Armor.",rules:["Obscured Target when in Cover"]},{id:2,name:"Civilian/Commercial Body Armor",armor:5,description:"Armor 5 and the unit counts as an Obscured Target from Ranged Attacks when in Cover.",rules:["Obscured Target from Ranged Attacks when in Cover"]},{id:3,name:"Military Body Armor",armor:6,description:"Armor 6 and the unit counts as an Obscured Target from Ranged Attacks when in Cover.",rules:["Obscured Target from Ranged Attacks when in Cover"]},{id:4,name:"Advanced Body Armor",armor:7,description:'Armor 7 with a -1" penalty to Move Stat but also the unit counts as an Obscured Target from Ranged Attacks when in Cover. Grants 1 extra die to Armor Save rolls, choosing best result.',rules:["Obscured Target from Ranged Attacks when in Cover","-1 penalty to Move","+1 die to Armor save roll, choose best result"]},{id:5,name:"Mimetic Camo",armor:4,description:"Armor 4 plus counts as an Obscured Target for any Melee or Ranged Combat. Cumulative with regular cover and obstruction modifiers.",rules:["Obscured Target from any Ranged or Melee Attacks, cumulative with regular obstruction and cover modifiers"]},{id:6,name:"Military Exo Suit",armor:7,description:'(Power Assisted Advanced Body Armor) Armor 7 with a +2" bonus to Move stat. PLUS counts as Obscured Target from Ranged Attacks when in Cover. Does not need to make a Will check for Deflected Hits. Grats 1 Extra die to Armor Save rolls. Choose best result.',rules:["+2 to Move","Obscured Target from Ranged Attacks when in Cover","No Will check for Deflected Hits","+1 die to Armor save roll, choose best result"]}],je=[{id:0,category:"melee",types:["Knife","Claws","Teeth"],range:{min:0,max:0},firepower:{value:1,per:"weapon"},damage:{value:0,per:"",template:""},rules:[]},{id:1,category:"melee",types:["Machete","Big Claws","Big Teeth"],range:{min:0,max:0},firepower:{value:1,per:"weapon"},damage:{value:1,per:"",template:""},rules:[]},{id:2,category:"melee",types:["Very Big Claws","Very Big Teeth"],range:{min:0,max:0},firepower:{value:1,per:"weapon"},damage:{value:2,per:"",template:""},rules:[]},{id:3,category:"melee",types:["Pistol"],range:{min:0,max:12},firepower:{value:1,per:"weapon"},damage:{value:0,per:"",template:""},rules:[]},{id:4,category:"melee",types:["Magnum Pistol"],range:{min:0,max:12},firepower:{value:1,per:"weapon"},damage:{value:1,per:"",template:""},rules:[]},{id:5,category:"melee",types:["Shotgun"],range:{min:0,max:12},firepower:{value:3,per:""},damage:{value:3,per:"",template:""},rules:['Damage 3 at Range Melee to 6"','Damage 2 at Range 6" to 12"']},{id:6,category:"melee",types:["SMG"],range:{min:0,max:18},firepower:{value:4,per:""},damage:{value:0,per:"",template:""},rules:[]},{id:7,category:"rifle",types:["Assault Rifle"],range:{min:1,max:36},firepower:{value:3,per:""},damage:{value:1,per:"",template:""},rules:[]},{id:8,category:"rifle",types:["Battle Rifle"],range:{min:1,max:48},firepower:{value:2,per:""},damage:{value:2,per:"",template:""},rules:[]},{id:9,category:"support",types:["Flame Thrower","Chemical Sprayer"],range:{},firepower:{},damage:{value:2,per:"model",template:"Flame"},rules:["Limited Ammo","Support Weapon","Burn"]},{id:10,category:"support",types:["40mm Grenade Launcher"],range:{min:4,max:24},firepower:{value:1,per:""},damage:{value:1,per:"model",template:"SBT"},rules:["Indirect Fire","Reload","Limited Ammo","Support Weapon"]},{id:11,category:"support",types:["Squad Light Machine Gun"],range:{min:1,max:48},firepower:{value:4,per:""},damage:{value:1,per:"",template:""},rules:["Support Weapon"]},{id:12,category:"support",types:["Rocket Launcher (Anti Armor)"],range:{min:4,max:48},firepower:{value:1,per:""},damage:{value:4,per:"",template:""},rules:["Reload","Limited Ammo","Support Weapon"]},{id:13,category:"support",types:["Rocket Launcher (Anti Infantry)"],range:{min:4,max:48},firepower:{value:1,per:""},damage:{value:2,per:"model",template:"SBT"},rules:["Reload","Limited Ammo","Support Weapon"]},{id:14,category:"support",types:["Sniper Rifle"],range:{min:1,max:60},firepower:{value:1,per:""},damage:{value:4,per:"",template:""},rules:["Support Weapon"]},{id:15,category:"support",types:["Heavy Machine Gun"],range:{min:1,max:60},firepower:{value:4,per:""},damage:{value:3,per:"",template:""},rules:["Crew Served"]},{id:16,category:"support",types:["Mortar"],range:{min:6,max:60},firepower:{value:1,per:""},damage:{value:2,per:"model",template:"LBT"},rules:["Crew Served","Indirect Fire","Reload","Limited Ammo"]},{id:17,category:"grenade",types:["Molotov Cocktail"],range:{min:1,max:18},firepower:{value:1,per:""},damage:{value:1,per:"model",template:"SBT"},rules:["Burn"]},{id:18,category:"grenade",types:["Flash Bang"],range:{min:1,max:18},firepower:{value:1,per:""},damage:{value:0,per:"model",template:"SBT"},rules:["1 Pinned/model"]},{id:19,category:"grenade",types:["Smoke Grenade"],range:{min:1,max:18},firepower:{value:1,per:""},damage:{value:0,per:"model",template:"LBT"},rules:["Smoke Blocks Line of Sight","-2 to Will check"]},{id:20,category:"grenade",types:["Hand Grenade"],range:{min:1,max:18},firepower:{value:1,per:""},damage:{value:2,per:"model",template:"SBT"},rules:[]},{id:21,category:"grenade",types:["Satchel Charge"],range:{min:2,max:12},firepower:{value:1,per:""},damage:{value:3,per:"model",template:"LBT"},rules:[]},{id:22,category:"melee",types:["Chainsaw"],range:{min:0,max:0},firepower:{value:3,per:""},damage:{value:1,per:"",template:""},rules:[]},{id:23,category:"melee",types:["Club","Baseball bat"],range:{min:0,max:0},firepower:{value:1,per:""},damage:{value:0,per:"",template:""},rules:[]}],Je=[{id:0,category:"basic",name:"Binoculars",description:'+12" to Inspect range when surveying Hot Spots or Mission Objectives.',effects:['+12" to Inspect range,'],value:200},{id:1,category:"basic",name:"Electric Juice",description:"Immediately grants 2 additional actions. Only 1 action allowed the following turn.",effects:["+2 Actions now, only 1 Action next turn"],value:100},{id:2,category:"basic",name:"Gas Mask",description:"No Will check required for Smoke or Fumes.",effects:["No Will check for Smoke/Fumes"],value:200},{id:3,category:"basic",name:"Med-Kit",description:"Replace 1 Wound with 2 Pinned. If used by Bone Doc, replace 1 Wound with 1 Pinned.",effects:["1 Wound into 2 Pinned (BoneDoc: 1 Pinned).","Free Action on self."],value:250},{id:4,category:"basic",name:"Red Dot Sight",description:"For Pistols, SMGs, Shotguns and Assault Rifles. +1 to Ranged Attack Combat Ability Roll at half the weapon's effective range or less.",effects:["Pistol/SMG/Shotgun/AR: +1 to Ranged CA roll at 50% Weapon range or less."],value:400},{id:5,category:"advanced",name:"Detector",description:"+2 to Will Check when Searching an Anomaly.",effects:["+2 to Will Check when Searching an Anomaly."],value:500},{id:6,category:"advanced",name:"Tool Kit",description:"+2 to all Mechanical Skill Checks and -1 to Action cost.",effects:["+2 to all Mechanical Skill Checks.","-1 to Action cost."],value:600},{id:7,category:"advanced",name:"NODs",description:"Negates Dark and Low Light LOS and Ranged Attack Penalties.",effects:["No Dark/Low Light LoS and Ranged Attack penalties."],value:750},{id:8,category:"advanced",name:"Hot Load Ammo",description:"Ranged Weapon only. +1 to Weapon Damage. Enough for 1 mission.",effects:["Ranged Weapons: +1 Damage. Lasts 1 mission."],value:350},{id:9,category:"advanced",name:"Scope",description:"Assault Rifles, Battle Rifles and Sniper Rifles only. +1 to Ranged Combat Ability Rolls at greater than half the weapons effective range.",effects:["AR, Battle/Sniper Rifles: +1 to Ranged CA Rolls at more than 50% Weapon range."],value:750},{id:10,category:"special",name:"Chest Rig",description:"+1 Grenade Slot and +1 Equipment Slot.",effects:["+1 Grenade Slot.","+1 Equipment Slot."],value:1e3},{id:11,category:"special",name:"Load Bearing West",description:"+2 Grenade Slot and +2 Equipment Slot.",effects:["+2 Grenade Slots.","+2 Equipment Slots"],value:1500},{id:12,category:"special",name:"Under Barrel Grenade Launcher",description:"Assault Rifles only. Adds a 40mm Grenade Launcher Option to a character's weapon.",effects:["Adds 40mm Grenade Launcher to 1 AR."],value:1800},{id:13,category:"special",name:"Kevlar Plates",description:"+1 to Characters Armor Rating. Can be added twice per crew member.",effects:["+1 Armor Rating.","Max 2 per character."],value:1800},{id:14,category:"special",name:"Heavy Weapon Reload",description:"+5 ammo of any single type of Limited Ammo weapon.",effects:["+5 Ammo of any 1 type of Limited Ammo"],value:2e3}];let ze=(e,t)=>{t&&(console.log("Updating K"),console.log(" current:         ",e.k),console.log(" new:"));let n=e.members.map((e=>e.cost)).reduce(((e,t)=>e+t)),l=e.members.map((e=>{let n=Ue(e.id),l=e.movement-n.movement;0!==e.weapons.filter((e=>"support"===e.category)).length&&(l=e.movement+1-n.movement);let r=e.combatAbility-n.combatAbility,o=e.will-n.will;return t&&(console.log("  member "+e.name+": ",e.experience),console.log("   cost          = "+e.cost),console.log("   move          = "+l),console.log("   combatAbility = "+r),console.log("   will          = "+o)),l+r+o})).reduce(((e,t)=>e+t));return e.k=n+l,t&&(console.log("  base:           ",n),console.log("  upgrades:       ",l),console.log(" new:             ",e.k)),e},Fe=e=>{let t=JSON.parse(JSON.stringify(Qe(e))),n=t.allies.map((e=>tt(e))),l=t.enemies.map((e=>tt(e))),r=JSON.parse(JSON.stringify(t.startingEquipment.map((e=>et(e)))));return t.allies=n,t.enemies=l,t.startingEquipment=r,t},Ke=e=>{let t=JSON.parse(JSON.stringify(Ze(3,e))),n=JSON.parse(JSON.stringify(Ve(5)));return t.skills.push(n),t},Ze=(e,t)=>{let n=JSON.parse(JSON.stringify(Ue(e))),l=Xe(n.armor);return n.experience=n.name,n.name="",n.armor=l.armor,n.equipment=[l],n.faction=t,n.weapons=[],n.skills=[],n.notes="",n.startingEquipment=[],n},Ve=e=>Ge.find((t=>t.id===e)),Ue=e=>De.find((t=>t.id===e)),Xe=e=>Pe.find((t=>t.id===e)),Ye=e=>je.find((t=>t.id===e)),Qe=e=>Ie.find((t=>t.id===e)),et=e=>Je.find((t=>t.id===e)),tt=e=>Qe(e).name,nt=()=>{let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{let n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};var lt=(e,t)=>{let n=Fe(t),l=Ke(n.name);return{id:nt(),name:e,faction:n,k:3,members:[l],notes:"",options:{startingEquipment:n.startingEquipment}}},rt=(e,t,n)=>{let l=Ze(e,t.faction.name);return t.members.push(l),ze(t,n)},ot=(e,t,n)=>{let l=JSON.parse(JSON.stringify(Ve(e)));return t.skills=[...t.skills,l],t.options.skill--,"Leader"===l.name&&(t.wounds++,t.leader=!0),n},at=(e,t,n)=>{let l=n.options.startingEquipment.find((t=>t.id===e));t.startingEquipment=[...t.startingEquipment,l];const r=n.options.startingEquipment.indexOf(l);return n.options.startingEquipment.splice(r,1),n},it=(e,t,n)=>{let l=JSON.parse(JSON.stringify(et(e)));return t.equipment=[...t.equipment,l],t.options.basicEquipment--,n},st=(e,t,n,l)=>{let r=JSON.parse(JSON.stringify(Ye(e)));return r.name=r.types.join(" / "),r.option=t,n.weapons=[...n.weapons,r],n.options[t]--,"support"===r.category&&(n.movement=n.movement>1?n.movement-1:1),l},ct=(e,t,n)=>{let l=JSON.parse(JSON.stringify(Xe(e)));return t.equipment=[...t.equipment,l],t.options.armor=0,t.armor=l.armor,n},ut=(e,t)=>(e.photo="",t),dt=(e,t,n)=>{let l=t.members.findIndex((t=>t===e));return t.members.splice(l,1),ze(t,n)},mt=(e,t,n)=>{let l=t.skills.findIndex((t=>t===e));return t.skills.splice(l,1),t.options.skill++,"Leader"===e.name&&(t.wounds--,t.leader=!1),n},pt=(e,t,n)=>{let l=t.equipment.findIndex((t=>t===e));return t.equipment.splice(l,1),e.armor?t.options.armor=1:t.options.basicEquipment++,n},ft=(e,t,n)=>{let l=t.startingEquipment.findIndex((t=>t===e));return t.startingEquipment.splice(l,1),n.options.startingEquipment.push(e),console.log(n),n},gt=(e,t,n)=>{let l=t.weapons.findIndex((t=>t===e));return t.weapons.splice(l,1),t.options[e.option]++,"support"===e.category&&(t.movement=t.movement+1),n},ht=ze,vt=(e,t)=>(t.faction=Fe(e),t.options.startingEquipment=t.faction.startingEquipment,t.members.forEach((e=>e.startingEquipment=[])),t),wt=(e,t)=>!!t.skills.find((t=>t.id===e));function yt(e,t,n){const l=e.slice();return l[8]=t[n].type,l[9]=t[n].value,l[10]=t[n].times,l[12]=n,l}function bt(e,t,n){const l=e.slice();return l[13]=t[n],l}function $t(e,t,n){const l=e.slice();return l[16]=t[n],l}function xt(e){let t,n=e[0].faction.name+"";return{c(){t=f(n)},m(e,n){u(e,t,n)},p(e,l){1&l&&n!==(n=e[0].faction.name+"")&&b(t,n)},d(e){e&&d(t)}}}function kt(e){let t,n,l,o=Ie,a=[];for(let t=0;t<o.length;t+=1)a[t]=At($t(e,o,t));return{c(){t=p("select");for(let e=0;e<a.length;e+=1)a[e].c();void 0===e[0].faction.id&&O((()=>e[4].call(t)))},m(r,o){u(r,t,o);for(let e=0;e<a.length;e+=1)a[e].m(t,null);x(t,e[0].faction.id),n||(l=[v(t,"change",e[4]),v(t,"change",e[5])],n=!0)},p(e,n){if(0&n){let l;for(o=Ie,l=0;l<o.length;l+=1){const r=$t(e,o,l);a[l]?a[l].p(r,n):(a[l]=At(r),a[l].c(),a[l].m(t,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=o.length}1&n&&x(t,e[0].faction.id)},d(e){e&&d(t),m(a,e),n=!1,r(l)}}}function At(t){let n,l,r=t[16].name+"";return{c(){n=p("option"),l=f(r),n.__value=t[16].id,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function St(e){let t,n,l,r,o,a,i,s=e[13].name+"",m=e[13].description+"";return{c(){t=p("div"),n=p("span"),l=f(s),r=f(":"),o=g(),a=f(m),i=g(),w(n,"class","listHeader")},m(e,s){u(e,t,s),c(t,n),c(n,l),c(n,r),c(t,o),c(t,a),c(t,i)},p(e,t){1&t&&s!==(s=e[13].name+"")&&b(l,s),1&t&&m!==(m=e[13].description+"")&&b(a,m)},d(e){e&&d(t)}}}function Ct(e){let t,n,l,r=e[10]+"";return{c(){t=f("on "),n=f(r),l=f(" occasions")},m(e,r){u(e,t,r),u(e,n,r),u(e,l,r)},p(e,t){1&t&&r!==(r=e[10]+"")&&b(n,r)},d(e){e&&d(t),e&&d(n),e&&d(l)}}}function Et(t){let n;return{c(){n=f("once every visit")},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function Tt(e){let t,n,l,r,o,a,i,s,m=e[9]+"",h=e[8]+"";function v(e,t){return-2===e[10]?Et:e[10]>0?Ct:void 0}let w=v(e),y=w&&w(e);return{c(){t=p("span"),n=f(m),l=f("% discount on "),r=f(h),o=g(),y&&y.c(),a=f(" at The Stalls."),i=g(),s=p("br")},m(e,d){u(e,t,d),c(t,n),c(t,l),c(t,r),c(t,o),y&&y.m(t,null),c(t,a),u(e,i,d),u(e,s,d)},p(e,l){1&l&&m!==(m=e[9]+"")&&b(n,m),1&l&&h!==(h=e[8]+"")&&b(r,h),w===(w=v(e))&&y?y.p(e,l):(y&&y.d(1),y=w&&w(e),y&&(y.c(),y.m(t,a)))},d(e){e&&d(t),y&&y.d(),e&&d(i),e&&d(s)}}}function Rt(e){let t,n,l,r,o,a,i,s,h,v,y,$,x,k,A,S,C,E,T,R,q,_,M,W,N,B,O,I,D,G,P,j,J,z,F,V,U,te,ne,le,re,oe,ae,ie,se,ce,ue=e[0].k+"",de=e[0].faction.allies.join(",")+"",me=e[0].faction.enemies.join(",")+"";function pe(t){e[3].call(null,t)}let fe={edit:e[1]};function ge(e,t){return e[1]?kt:xt}void 0!==e[0].name&&(fe.value=e[0].name),a=new We({props:fe}),L.push((()=>X(a,"value",pe)));let he=ge(e),ve=he(e),we=e[0].faction.startingEquipment,ye=[];for(let t=0;t<we.length;t+=1)ye[t]=St(bt(e,we,t));function be(t){e[6].call(null,t)}let $e={type:"textarea",edit:e[1]};void 0!==e[0].artifacts&&($e.value=e[0].artifacts),W=new We({props:$e}),L.push((()=>X(W,"value",be)));let xe=e[0].faction.discounts,ke=[];for(let t=0;t<xe.length;t+=1)ke[t]=Tt(yt(e,xe,t));function Ae(t){e[7].call(null,t)}let Se={type:"textarea",edit:e[1]};return void 0!==e[0].notes&&(Se.value=e[0].notes),ae=new We({props:Se}),L.push((()=>X(ae,"value",Ae))),{c(){t=p("table"),n=p("tr"),l=p("th"),l.textContent="Crew Name",r=g(),o=p("td"),Y(a.$$.fragment),s=g(),h=p("th"),h.textContent="Faction",v=g(),y=p("td"),ve.c(),$=g(),x=p("th"),x.textContent="Khrabrost'",k=g(),A=p("td"),S=f(ue),C=g(),E=p("tr"),E.innerHTML='<th colspan="3">Equipment</th> \n    <th colspan="3">Artifacts</th>',T=g(),R=p("tr"),q=p("td");for(let e=0;e<ye.length;e+=1)ye[e].c();_=g(),M=p("td"),Y(W.$$.fragment),O=g(),I=p("tr"),I.innerHTML='<th class="wide" colspan="6">Notes</th>',D=g(),G=p("tr"),P=p("td");for(let e=0;e<ke.length;e+=1)ke[e].c();j=g(),J=p("span"),J.textContent="Allies: ",z=p("span"),F=f(de),V=g(),U=p("br"),te=g(),ne=p("span"),ne.textContent="Enemies: ",le=p("span"),re=f(me),oe=g(),Y(ae.$$.fragment),w(q,"colspan","3"),w(M,"colspan","3"),w(R,"class",B="list "+(e[2]?"artifacts":"")+" svelte-163lba0"),w(P,"class",se="wide "+(e[2]?"notes":"")+" svelte-163lba0"),w(P,"colspan","6"),w(G,"class","list"),w(t,"class","pad svelte-163lba0")},m(e,i){u(e,t,i),c(t,n),c(n,l),c(n,r),c(n,o),Q(a,o,null),c(n,s),c(n,h),c(n,v),c(n,y),ve.m(y,null),c(n,$),c(n,x),c(n,k),c(n,A),c(A,S),c(t,C),c(t,E),c(t,T),c(t,R),c(R,q);for(let e=0;e<ye.length;e+=1)ye[e].m(q,null);c(R,_),c(R,M),Q(W,M,null),c(t,O),c(t,I),c(t,D),c(t,G),c(G,P);for(let e=0;e<ke.length;e+=1)ke[e].m(P,null);c(P,j),c(P,J),c(P,z),c(z,F),c(P,V),c(P,U),c(P,te),c(P,ne),c(P,le),c(le,re),c(P,oe),Q(ae,P,null),ce=!0},p(e,[t]){const n={};if(2&t&&(n.edit=e[1]),!i&&1&t&&(i=!0,n.value=e[0].name,H((()=>i=!1))),a.$set(n),he===(he=ge(e))&&ve?ve.p(e,t):(ve.d(1),ve=he(e),ve&&(ve.c(),ve.m(y,null))),(!ce||1&t)&&ue!==(ue=e[0].k+"")&&b(S,ue),1&t){let n;for(we=e[0].faction.startingEquipment,n=0;n<we.length;n+=1){const l=bt(e,we,n);ye[n]?ye[n].p(l,t):(ye[n]=St(l),ye[n].c(),ye[n].m(q,null))}for(;n<ye.length;n+=1)ye[n].d(1);ye.length=we.length}const l={};if(2&t&&(l.edit=e[1]),!N&&1&t&&(N=!0,l.value=e[0].artifacts,H((()=>N=!1))),W.$set(l),(!ce||4&t&&B!==(B="list "+(e[2]?"artifacts":"")+" svelte-163lba0"))&&w(R,"class",B),1&t){let n;for(xe=e[0].faction.discounts,n=0;n<xe.length;n+=1){const l=yt(e,xe,n);ke[n]?ke[n].p(l,t):(ke[n]=Tt(l),ke[n].c(),ke[n].m(P,j))}for(;n<ke.length;n+=1)ke[n].d(1);ke.length=xe.length}(!ce||1&t)&&de!==(de=e[0].faction.allies.join(",")+"")&&b(F,de),(!ce||1&t)&&me!==(me=e[0].faction.enemies.join(",")+"")&&b(re,me);const r={};2&t&&(r.edit=e[1]),!ie&&1&t&&(ie=!0,r.value=e[0].notes,H((()=>ie=!1))),ae.$set(r),(!ce||4&t&&se!==(se="wide "+(e[2]?"notes":"")+" svelte-163lba0"))&&w(P,"class",se)},i(e){ce||(K(a.$$.fragment,e),K(W.$$.fragment,e),K(ae.$$.fragment,e),ce=!0)},o(e){Z(a.$$.fragment,e),Z(W.$$.fragment,e),Z(ae.$$.fragment,e),ce=!1},d(e){e&&d(t),ee(a),ve.d(),m(ye,e),ee(W),m(ke,e),ee(ae)}}}function Lt(e,t,n){let{edit:l=!1}=t,{print:r=!1}=t,{crew:o}=t;return e.$$set=e=>{"edit"in e&&n(1,l=e.edit),"print"in e&&n(2,r=e.print),"crew"in e&&n(0,o=e.crew)},[o,l,r,function(e){o.name=e,n(0,o)},function(){o.faction.id=k(this),n(0,o)},()=>n(0,o=vt(o.faction.id,o)),function(e){o.artifacts=e,n(0,o)},function(e){o.notes=e,n(0,o)}]}class qt extends ne{constructor(e){super(),te(this,e,Lt,Rt,a,{edit:1,print:2,crew:0})}}function _t(e,t,n){const l=e.slice();return l[9]=t[n],l}function Mt(e,t,n){const l=e.slice();return l[12]=t[n],l}function Wt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function Nt(e){let t,n=e[12].description+"";return{c(){t=f(n)},m(e,n){u(e,t,n)},p(e,l){4&l&&n!==(n=e[12].description+"")&&b(t,n)},d(e){e&&d(t)}}}function Bt(e){let t,n=e[12].effects,l=[];for(let t=0;t<n.length;t+=1)l[t]=Ht(Wt(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=h()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);u(e,t,n)},p(e,r){if(4&r){let o;for(n=e[12].effects,o=0;o<n.length;o+=1){const a=Wt(e,n,o);l[o]?l[o].p(a,r):(l[o]=Ht(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){m(l,e),e&&d(t)}}}function Ot(e){let t;return{c(){t=p("br")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Ht(e){let t,n,l,r,o=e[15]+"",a=e[17]<e[12].effects.length-1&&Ot();return{c(){t=p("span"),n=f(o),l=g(),a&&a.c(),r=h()},m(e,o){u(e,t,o),c(t,n),u(e,l,o),a&&a.m(e,o),u(e,r,o)},p(e,t){4&t&&o!==(o=e[15]+"")&&b(n,o),e[17]<e[12].effects.length-1?a||(a=Ot(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&d(t),e&&d(l),a&&a.d(e),e&&d(r)}}}function It(e){let t,n,l,r,o,a,i,s,m,h=e[12].name+"";function v(){return e[5](e[12])}function y(t){e[6].call(null,t)}let $={click:v};function x(e,t){return e[3]?Bt:Nt}void 0!==e[0]&&($.edit=e[0]),n=new He({props:$}),L.push((()=>X(n,"edit",y)));let k=x(e),A=k(e);return{c(){t=p("div"),Y(n.$$.fragment),r=g(),o=p("span"),a=f(h),i=f(":"),s=g(),A.c(),w(o,"class","listHeader")},m(e,l){u(e,t,l),Q(n,t,null),c(t,r),c(t,o),c(o,a),c(o,i),c(t,s),A.m(t,null),m=!0},p(r,o){e=r;const i={};6&o&&(i.click=v),!l&&1&o&&(l=!0,i.edit=e[0],H((()=>l=!1))),n.$set(i),(!m||4&o)&&h!==(h=e[12].name+"")&&b(a,h),k===(k=x(e))&&A?A.p(e,o):(A.d(1),A=k(e),A&&(A.c(),A.m(t,null)))},i(e){m||(K(n.$$.fragment,e),m=!0)},o(e){Z(n.$$.fragment,e),m=!1},d(e){e&&d(t),ee(n),A.d()}}}function Dt(e){let t,n,l,o,a,i,s,c=Ge,f=[];for(let t=0;t<c.length;t+=1)f[t]=Pt(_t(e,c,t));return{c(){t=p("label"),t.textContent="Add skill",n=g(),l=p("select");for(let e=0;e<f.length;e+=1)f[e].c();o=g(),a=p("button"),a.textContent="Add",w(t,"for","skills"),w(l,"id","skills"),void 0===e[4]&&O((()=>e[7].call(l)))},m(r,c){u(r,t,c),u(r,n,c),u(r,l,c);for(let e=0;e<f.length;e+=1)f[e].m(l,null);x(l,e[4]),u(r,o,c),u(r,a,c),i||(s=[v(l,"change",e[7]),v(a,"click",e[8])],i=!0)},p(e,t){if(4&t){let n;for(c=Ge,n=0;n<c.length;n+=1){const r=_t(e,c,n);f[n]?f[n].p(r,t):(f[n]=Pt(r),f[n].c(),f[n].m(l,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=c.length}16&t&&x(l,e[4])},d(e){e&&d(t),e&&d(n),e&&d(l),m(f,e),e&&d(o),e&&d(a),i=!1,r(s)}}}function Gt(t){let n,l,r=t[9].name+"";return{c(){n=p("option"),l=f(r),n.__value=t[9].id,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function Pt(e){let t,n=!wt(e[9].id,e[2]),l=n&&Gt(e);return{c(){l&&l.c(),t=h()},m(e,n){l&&l.m(e,n),u(e,t,n)},p(e,r){4&r&&(n=!wt(e[9].id,e[2])),n?l?l.p(e,r):(l=Gt(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&d(t)}}}function jt(e){let t,n,l,r,o,a,i,s=e[2].skills,f=[];for(let t=0;t<s.length;t+=1)f[t]=It(Mt(e,s,t));const h=e=>Z(f[e],1,1,(()=>{f[e]=null}));let v=e[2].options.skill>0&&e[0]&&Dt(e);return{c(){t=p("table"),n=p("tr"),n.innerHTML="<th>Skills</th>",l=g(),r=p("tr"),o=p("td");for(let e=0;e<f.length;e+=1)f[e].c();a=g(),v&&v.c(),w(n,"class","wide"),w(o,"class","wide fixed"),w(r,"class","list wide")},m(e,s){u(e,t,s),c(t,n),c(t,l),c(t,r),c(r,o);for(let e=0;e<f.length;e+=1)f[e].m(o,null);c(o,a),v&&v.m(o,null),i=!0},p(e,[t]){if(15&t){let n;for(s=e[2].skills,n=0;n<s.length;n+=1){const l=Mt(e,s,n);f[n]?(f[n].p(l,t),K(f[n],1)):(f[n]=It(l),f[n].c(),K(f[n],1),f[n].m(o,a))}for(z(),n=s.length;n<f.length;n+=1)h(n);F()}e[2].options.skill>0&&e[0]?v?v.p(e,t):(v=Dt(e),v.c(),v.m(o,null)):v&&(v.d(1),v=null)},i(e){if(!i){for(let e=0;e<s.length;e+=1)K(f[e]);i=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)Z(f[e]);i=!1},d(e){e&&d(t),m(f,e),v&&v.d()}}}function Jt(e,t,n){let l,{edit:r=!1}=t,{crew:o}=t,{member:a}=t,{compact:i=!0}=t;return e.$$set=e=>{"edit"in e&&n(0,r=e.edit),"crew"in e&&n(1,o=e.crew),"member"in e&&n(2,a=e.member),"compact"in e&&n(3,i=e.compact)},[r,o,a,i,l,e=>n(1,o=mt(e,a,o)),function(e){r=e,n(0,r)},function(){l=k(this),n(4,l)},()=>n(1,o=ot(l,a,o))]}class zt extends ne{constructor(e){super(),te(this,e,Jt,jt,a,{edit:0,crew:1,member:2,compact:3})}}function Ft(e,t,n){const l=e.slice();return l[20]=t[n],l}function Kt(e,t,n){const l=e.slice();return l[23]=t[n],l}function Zt(e,t,n){const l=e.slice();return l[23]=t[n],l}function Vt(e,t,n){const l=e.slice();return l[28]=t[n],l}function Ut(e,t,n){const l=e.slice();return l[34]=t[n],l[33]=n,l}function Xt(e,t,n){const l=e.slice();return l[31]=t[n],l[33]=n,l}function Yt(e,t,n){const l=e.slice();return l[28]=t[n],l}function Qt(e,t,n){const l=e.slice();return l[34]=t[n],l[33]=n,l}function en(e,t,n){const l=e.slice();return l[31]=t[n],l[33]=n,l}function tn(e){let t,n,l,r,o,a=e[28].name+"",i=e[28].description+"";return{c(){t=p("span"),n=f(a),l=f(":"),r=g(),o=f(i),w(t,"class","listHeader")},m(e,a){u(e,t,a),c(t,n),c(t,l),u(e,r,a),u(e,o,a)},p(e,t){16&t[0]&&a!==(a=e[28].name+"")&&b(n,a),16&t[0]&&i!==(i=e[28].description+"")&&b(o,i)},d(e){e&&d(t),e&&d(r),e&&d(o)}}}function nn(e){let t,n,l,r,o,a=e[28].name+"",i=e[28].effects,s=[];for(let t=0;t<i.length;t+=1)s[t]=on(Qt(e,i,t));return{c(){t=p("span"),n=f(a),l=f(":"),r=g();for(let e=0;e<s.length;e+=1)s[e].c();o=h(),w(t,"class","listHeader")},m(e,a){u(e,t,a),c(t,n),c(t,l),u(e,r,a);for(let t=0;t<s.length;t+=1)s[t].m(e,a);u(e,o,a)},p(e,t){if(16&t[0]&&a!==(a=e[28].name+"")&&b(n,a),16&t[0]){let n;for(i=e[28].effects,n=0;n<i.length;n+=1){const l=Qt(e,i,n);s[n]?s[n].p(l,t):(s[n]=on(l),s[n].c(),s[n].m(o.parentNode,o))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(e){e&&d(t),e&&d(r),m(s,e),e&&d(o)}}}function ln(e){let t,n,l,r,o,a,i=e[28].name+"",s=e[28].armor&&an(e),v=e[28].rules,y=[];for(let t=0;t<v.length;t+=1)y[t]=cn(en(e,v,t));return{c(){t=p("span"),n=f(i),l=f(":"),r=g(),s&&s.c(),o=g();for(let e=0;e<y.length;e+=1)y[e].c();a=h(),w(t,"class","listHeader")},m(e,i){u(e,t,i),c(t,n),c(t,l),u(e,r,i),s&&s.m(e,i),u(e,o,i);for(let t=0;t<y.length;t+=1)y[t].m(e,i);u(e,a,i)},p(e,t){if(16&t[0]&&i!==(i=e[28].name+"")&&b(n,i),e[28].armor?s?s.p(e,t):(s=an(e),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null),16&t[0]){let n;for(v=e[28].rules,n=0;n<v.length;n+=1){const l=en(e,v,n);y[n]?y[n].p(l,t):(y[n]=cn(l),y[n].c(),y[n].m(a.parentNode,a))}for(;n<y.length;n+=1)y[n].d(1);y.length=v.length}},d(e){e&&d(t),e&&d(r),s&&s.d(e),e&&d(o),m(y,e),e&&d(a)}}}function rn(e){let t;return{c(){t=p("br")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function on(e){let t,n,l,r,o=e[34]+"",a=e[33]<e[28].effects.length-1&&rn();return{c(){t=p("span"),n=f(o),l=g(),a&&a.c(),r=h()},m(e,o){u(e,t,o),c(t,n),u(e,l,o),a&&a.m(e,o),u(e,r,o)},p(e,t){16&t[0]&&o!==(o=e[34]+"")&&b(n,o),e[33]<e[28].effects.length-1?a||(a=rn(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&d(t),e&&d(l),a&&a.d(e),e&&d(r)}}}function an(e){let t,n,l,r=e[28].armor+"";return{c(){t=f("Armor "),n=f(r),l=p("br")},m(e,r){u(e,t,r),u(e,n,r),u(e,l,r)},p(e,t){16&t[0]&&r!==(r=e[28].armor+"")&&b(n,r)},d(e){e&&d(t),e&&d(n),e&&d(l)}}}function sn(e){let t;return{c(){t=p("br")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function cn(e){let t,n,l,r,o=e[31]+"",a=e[33]<e[28].rules.length-1&&sn();return{c(){t=p("span"),n=f(o),l=g(),a&&a.c(),r=h()},m(e,o){u(e,t,o),c(t,n),u(e,l,o),a&&a.m(e,o),u(e,r,o)},p(e,t){16&t[0]&&o!==(o=e[31]+"")&&b(n,o),e[33]<e[28].rules.length-1?a||(a=sn(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&d(t),e&&d(l),a&&a.d(e),e&&d(r)}}}function un(e){let t,n,l,r,o;function a(){return e[10](e[28])}function i(t){e[11].call(null,t)}let s={click:a};function m(e,t){return e[2]&&e[28].rules?ln:e[2]?nn:tn}void 0!==e[1]&&(s.edit=e[1]),n=new He({props:s}),L.push((()=>X(n,"edit",i)));let f=m(e),h=f(e);return{c(){t=p("div"),Y(n.$$.fragment),r=g(),h.c()},m(e,l){u(e,t,l),Q(n,t,null),c(t,r),h.m(t,null),o=!0},p(r,o){e=r;const i={};17&o[0]&&(i.click=a),!l&&2&o[0]&&(l=!0,i.edit=e[1],H((()=>l=!1))),n.$set(i),f===(f=m(e))&&h?h.p(e,o):(h.d(1),h=f(e),h&&(h.c(),h.m(t,null)))},i(e){o||(K(n.$$.fragment,e),o=!0)},o(e){Z(n.$$.fragment,e),o=!1},d(e){e&&d(t),ee(n),h.d()}}}function dn(e){let t,n,l,r,o,a=e[28].name+"",i=e[28].description+"";return{c(){t=p("span"),n=f(a),l=f(":"),r=g(),o=f(i),w(t,"class","listHeader")},m(e,a){u(e,t,a),c(t,n),c(t,l),u(e,r,a),u(e,o,a)},p(e,t){16&t[0]&&a!==(a=e[28].name+"")&&b(n,a),16&t[0]&&i!==(i=e[28].description+"")&&b(o,i)},d(e){e&&d(t),e&&d(r),e&&d(o)}}}function mn(e){let t,n,l,r,o,a=e[28].name+"",i=e[28].effects,s=[];for(let t=0;t<i.length;t+=1)s[t]=gn(Ut(e,i,t));return{c(){t=p("span"),n=f(a),l=f(":"),r=g();for(let e=0;e<s.length;e+=1)s[e].c();o=h(),w(t,"class","listHeader")},m(e,a){u(e,t,a),c(t,n),c(t,l),u(e,r,a);for(let t=0;t<s.length;t+=1)s[t].m(e,a);u(e,o,a)},p(e,t){if(16&t[0]&&a!==(a=e[28].name+"")&&b(n,a),16&t[0]){let n;for(i=e[28].effects,n=0;n<i.length;n+=1){const l=Ut(e,i,n);s[n]?s[n].p(l,t):(s[n]=gn(l),s[n].c(),s[n].m(o.parentNode,o))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(e){e&&d(t),e&&d(r),m(s,e),e&&d(o)}}}function pn(e){let t,n,l,r,o,a=e[28].name+"",i=e[28].rules,s=[];for(let t=0;t<i.length;t+=1)s[t]=vn(Xt(e,i,t));return{c(){t=p("span"),n=f(a),l=f(":"),r=g();for(let e=0;e<s.length;e+=1)s[e].c();o=h(),w(t,"class","listHeader")},m(e,a){u(e,t,a),c(t,n),c(t,l),u(e,r,a);for(let t=0;t<s.length;t+=1)s[t].m(e,a);u(e,o,a)},p(e,t){if(16&t[0]&&a!==(a=e[28].name+"")&&b(n,a),16&t[0]){let n;for(i=e[28].rules,n=0;n<i.length;n+=1){const l=Xt(e,i,n);s[n]?s[n].p(l,t):(s[n]=vn(l),s[n].c(),s[n].m(o.parentNode,o))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(e){e&&d(t),e&&d(r),m(s,e),e&&d(o)}}}function fn(e){let t;return{c(){t=p("br")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function gn(e){let t,n,l,r,o=e[34]+"",a=e[33]<e[28].effects.length-1&&fn();return{c(){t=p("span"),n=f(o),l=g(),a&&a.c(),r=h()},m(e,o){u(e,t,o),c(t,n),u(e,l,o),a&&a.m(e,o),u(e,r,o)},p(e,t){16&t[0]&&o!==(o=e[34]+"")&&b(n,o),e[33]<e[28].effects.length-1?a||(a=fn(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&d(t),e&&d(l),a&&a.d(e),e&&d(r)}}}function hn(e){let t;return{c(){t=p("br")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function vn(e){let t,n,l,r,o=e[31]+"",a=e[33]<e[28].rules.length-1&&hn();return{c(){t=p("span"),n=f(o),l=g(),a&&a.c(),r=h()},m(e,o){u(e,t,o),c(t,n),u(e,l,o),a&&a.m(e,o),u(e,r,o)},p(e,t){16&t[0]&&o!==(o=e[31]+"")&&b(n,o),e[33]<e[28].rules.length-1?a||(a=hn(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&d(t),e&&d(l),a&&a.d(e),e&&d(r)}}}function wn(e){let t,n,l,r,o;function a(){return e[12](e[28])}function i(t){e[13].call(null,t)}let s={click:a};function m(e,t){return e[2]&&e[28].rules?pn:e[2]?mn:dn}void 0!==e[1]&&(s.edit=e[1]),n=new He({props:s}),L.push((()=>X(n,"edit",i)));let f=m(e),h=f(e);return{c(){t=p("div"),Y(n.$$.fragment),r=g(),h.c()},m(e,l){u(e,t,l),Q(n,t,null),c(t,r),h.m(t,null),o=!0},p(r,o){e=r;const i={};17&o[0]&&(i.click=a),!l&&2&o[0]&&(l=!0,i.edit=e[1],H((()=>l=!1))),n.$set(i),f===(f=m(e))&&h?h.p(e,o):(h.d(1),h=f(e),h&&(h.c(),h.m(t,null)))},i(e){o||(K(n.$$.fragment,e),o=!0)},o(e){Z(n.$$.fragment,e),o=!1},d(e){e&&d(t),ee(n),h.d()}}}function yn(e){let t,n,l,o,a,i,s,c=e[0].options.startingEquipment,f=[];for(let t=0;t<c.length;t+=1)f[t]=bn(Zt(e,c,t));return{c(){t=p("label"),t.textContent="Add starting equipment",n=g(),l=p("select");for(let e=0;e<f.length;e+=1)f[e].c();o=g(),a=p("button"),a.textContent="Add",w(t,"for","startingEquipment"),w(l,"id","startingEquipment"),void 0===e[5]&&O((()=>e[14].call(l)))},m(r,c){u(r,t,c),u(r,n,c),u(r,l,c);for(let e=0;e<f.length;e+=1)f[e].m(l,null);x(l,e[5]),u(r,o,c),u(r,a,c),i||(s=[v(l,"change",e[14]),v(a,"click",e[9])],i=!0)},p(e,t){if(1&t[0]){let n;for(c=e[0].options.startingEquipment,n=0;n<c.length;n+=1){const r=Zt(e,c,n);f[n]?f[n].p(r,t):(f[n]=bn(r),f[n].c(),f[n].m(l,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=c.length}33&t[0]&&x(l,e[5])},d(e){e&&d(t),e&&d(n),e&&d(l),m(f,e),e&&d(o),e&&d(a),i=!1,r(s)}}}function bn(e){let t,n,l,r=e[23].name+"";return{c(){t=p("option"),n=f(r),t.__value=l=e[23].id,t.value=t.__value},m(e,l){u(e,t,l),c(t,n)},p(e,o){1&o[0]&&r!==(r=e[23].name+"")&&b(n,r),1&o[0]&&l!==(l=e[23].id)&&(t.__value=l,t.value=t.__value)},d(e){e&&d(t)}}}function $n(e){let t,n,l,o,a,i,s,c=e[8],f=[];for(let t=0;t<c.length;t+=1)f[t]=xn(Kt(e,c,t));return{c(){t=p("label"),t.textContent="Add basic equipment",n=g(),l=p("select");for(let e=0;e<f.length;e+=1)f[e].c();o=g(),a=p("button"),a.textContent="Add",w(t,"for","basicEquipment"),w(l,"id","basicEquipment"),void 0===e[6]&&O((()=>e[15].call(l)))},m(r,c){u(r,t,c),u(r,n,c),u(r,l,c);for(let e=0;e<f.length;e+=1)f[e].m(l,null);x(l,e[6]),u(r,o,c),u(r,a,c),i||(s=[v(l,"change",e[15]),v(a,"click",e[16])],i=!0)},p(e,t){if(256&t[0]){let n;for(c=e[8],n=0;n<c.length;n+=1){const r=Kt(e,c,n);f[n]?f[n].p(r,t):(f[n]=xn(r),f[n].c(),f[n].m(l,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=c.length}320&t[0]&&x(l,e[6])},d(e){e&&d(t),e&&d(n),e&&d(l),m(f,e),e&&d(o),e&&d(a),i=!1,r(s)}}}function xn(t){let n,l,r=t[23].name+"";return{c(){n=p("option"),l=f(r),n.__value=t[23].id,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function kn(e){let t,n,l,o,a,i,s,c=Pe,f=[];for(let t=0;t<c.length;t+=1)f[t]=An(Ft(e,c,t));return{c(){t=p("label"),t.textContent="Add armor",n=g(),l=p("select");for(let e=0;e<f.length;e+=1)f[e].c();o=g(),a=p("button"),a.textContent="Add",w(t,"for","armor"),w(l,"id","armor"),void 0===e[7]&&O((()=>e[17].call(l)))},m(r,c){u(r,t,c),u(r,n,c),u(r,l,c);for(let e=0;e<f.length;e+=1)f[e].m(l,null);x(l,e[7]),u(r,o,c),u(r,a,c),i||(s=[v(l,"change",e[17]),v(a,"click",e[18])],i=!0)},p(e,t){if(0&t){let n;for(c=Pe,n=0;n<c.length;n+=1){const r=Ft(e,c,n);f[n]?f[n].p(r,t):(f[n]=An(r),f[n].c(),f[n].m(l,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=c.length}128&t[0]&&x(l,e[7])},d(e){e&&d(t),e&&d(n),e&&d(l),m(f,e),e&&d(o),e&&d(a),i=!1,r(s)}}}function An(t){let n,l,r=t[20].name+"";return{c(){n=p("option"),l=f(r),n.__value=t[20].id,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function Sn(e){let t,n,l,r,o,a,i,s,f,h,v,y=e[4].equipment,b=[];for(let t=0;t<y.length;t+=1)b[t]=un(Yt(e,y,t));const $=e=>Z(b[e],1,1,(()=>{b[e]=null}));let x=e[4].startingEquipment,k=[];for(let t=0;t<x.length;t+=1)k[t]=wn(Vt(e,x,t));const A=e=>Z(k[e],1,1,(()=>{k[e]=null}));let S=e[0].options.startingEquipment.length>0&&e[1]&&yn(e),C=e[4].options.basicEquipment>0&&e[1]&&$n(e),E=1===e[4].options.armor&&e[1]&&kn(e);return{c(){t=p("table"),n=p("tr"),n.innerHTML='<th class="wide" colspan="4">Equipment</th>',l=g(),r=p("tr"),o=p("td");for(let e=0;e<b.length;e+=1)b[e].c();a=g();for(let e=0;e<k.length;e+=1)k[e].c();i=g(),S&&S.c(),s=g(),C&&C.c(),f=g(),E&&E.c(),w(n,"class","wide"),w(o,"class",h="wide equipment "+(e[3]?"print":"fixedTall")+" svelte-18144uy"),w(o,"colspan","4"),w(r,"class","list wide")},m(e,d){u(e,t,d),c(t,n),c(t,l),c(t,r),c(r,o);for(let e=0;e<b.length;e+=1)b[e].m(o,null);c(o,a);for(let e=0;e<k.length;e+=1)k[e].m(o,null);c(o,i),S&&S.m(o,null),c(o,s),C&&C.m(o,null),c(o,f),E&&E.m(o,null),v=!0},p(e,t){if(23&t[0]){let n;for(y=e[4].equipment,n=0;n<y.length;n+=1){const l=Yt(e,y,n);b[n]?(b[n].p(l,t),K(b[n],1)):(b[n]=un(l),b[n].c(),K(b[n],1),b[n].m(o,a))}for(z(),n=y.length;n<b.length;n+=1)$(n);F()}if(23&t[0]){let n;for(x=e[4].startingEquipment,n=0;n<x.length;n+=1){const l=Vt(e,x,n);k[n]?(k[n].p(l,t),K(k[n],1)):(k[n]=wn(l),k[n].c(),K(k[n],1),k[n].m(o,i))}for(z(),n=x.length;n<k.length;n+=1)A(n);F()}e[0].options.startingEquipment.length>0&&e[1]?S?S.p(e,t):(S=yn(e),S.c(),S.m(o,s)):S&&(S.d(1),S=null),e[4].options.basicEquipment>0&&e[1]?C?C.p(e,t):(C=$n(e),C.c(),C.m(o,f)):C&&(C.d(1),C=null),1===e[4].options.armor&&e[1]?E?E.p(e,t):(E=kn(e),E.c(),E.m(o,null)):E&&(E.d(1),E=null),(!v||8&t[0]&&h!==(h="wide equipment "+(e[3]?"print":"fixedTall")+" svelte-18144uy"))&&w(o,"class",h)},i(e){if(!v){for(let e=0;e<y.length;e+=1)K(b[e]);for(let e=0;e<x.length;e+=1)K(k[e]);v=!0}},o(e){b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)Z(b[e]);k=k.filter(Boolean);for(let e=0;e<k.length;e+=1)Z(k[e]);v=!1},d(e){e&&d(t),m(b,e),m(k,e),S&&S.d(),C&&C.d(),E&&E.d()}}}function Cn(e,t,n){let l,r,o,{edit:a=!1}=t,{compact:i=!0}=t,{print:s=!1}=t,{crew:c}=t,{member:u}=t,d=Je.filter((e=>"basic"===e.category)),m=()=>{c.options.startingEquipment[0]&&n(5,l=c.options.startingEquipment[0].id)};m();return e.$$set=e=>{"edit"in e&&n(1,a=e.edit),"compact"in e&&n(2,i=e.compact),"print"in e&&n(3,s=e.print),"crew"in e&&n(0,c=e.crew),"member"in e&&n(4,u=e.member)},e.$$.update=()=>{1&e.$$.dirty[0]&&c.faction&&m()},[c,a,i,s,u,l,r,o,d,()=>{console.log("selectedStartEquipment"),n(0,c=at(l,u,c)),m(),console.log(l)},e=>n(0,c=pt(e,u,c)),function(e){a=e,n(1,a)},e=>n(0,c=ft(e,u,c)),function(e){a=e,n(1,a)},function(){l=k(this),n(5,l),n(0,c)},function(){r=k(this),n(6,r),n(8,d)},()=>n(0,c=it(r,u,c)),function(){o=k(this),n(7,o)},()=>n(0,c=ct(o,u,c))]}class En extends ne{constructor(e){super(),te(this,e,Cn,Sn,a,{edit:1,compact:2,print:3,crew:0,member:4},[-1,-1])}}function Tn(e,t,n){const l=e.slice();return l[9]=t[n],l}function Rn(e){let t,n,l,r,o=e[9].types.join(" / ")+"";return{c(){t=p("option"),n=f(o),l=g(),t.__value=r=e[9].id,t.value=t.__value},m(e,r){u(e,t,r),c(t,n),c(t,l)},p(e,l){8&l&&o!==(o=e[9].types.join(" / ")+"")&&b(n,o),8&l&&r!==(r=e[9].id)&&(t.__value=r,t.value=t.__value)},d(e){e&&d(t)}}}function Ln(t){let n,l,a,i,s,h,y,$,k,A,S=t[3],C=[];for(let e=0;e<S.length;e+=1)C[e]=Rn(Tn(t,S,e));return{c(){n=p("tr"),l=p("td"),a=p("label"),i=f(t[1]),s=g(),h=p("select");for(let e=0;e<C.length;e+=1)C[e].c();y=g(),$=p("button"),$.textContent="Add",w(a,"for","weapon"),w(h,"id","weapon"),void 0===t[0]&&O((()=>t[5].call(h))),w(l,"class","wide"),w(l,"colspan","4"),w(n,"class","list")},m(e,r){u(e,n,r),c(n,l),c(l,a),c(a,i),c(l,s),c(l,h);for(let e=0;e<C.length;e+=1)C[e].m(h,null);x(h,t[0]),c(l,y),c(l,$),k||(A=[v(h,"change",t[5]),v($,"click",(function(){o(t[2])&&t[2].apply(this,arguments)}))],k=!0)},p(e,[n]){if(t=e,2&n&&b(i,t[1]),8&n){let e;for(S=t[3],e=0;e<S.length;e+=1){const l=Tn(t,S,e);C[e]?C[e].p(l,n):(C[e]=Rn(l),C[e].c(),C[e].m(h,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=S.length}9&n&&x(h,t[0])},i:e,o:e,d(e){e&&d(n),m(C,e),k=!1,r(A)}}}function qn(e,t,n){let{label:l="Add weapon"}=t,{weaponSet:r="all"}=t,{selectedWeapon:o}=t,{click:a=(()=>{})}=t,i=je.filter((e=>"grenade"!==e.category)).filter((e=>0!==e.range.max)),s=je.filter((e=>"grenade"!==e.category)).filter((e=>0===e.range.min)),c=je.filter((e=>"grenade"===e.category)),u=je;switch(r){case"ranged":u=i;break;case"melee":u=s;break;case"grenades":u=c}return e.$$set=e=>{"label"in e&&n(1,l=e.label),"weaponSet"in e&&n(4,r=e.weaponSet),"selectedWeapon"in e&&n(0,o=e.selectedWeapon),"click"in e&&n(2,a=e.click)},[o,l,a,u,r,function(){o=k(this),n(0,o),n(3,u)}]}class _n extends ne{constructor(e){super(),te(this,e,qn,Ln,a,{label:1,weaponSet:4,selectedWeapon:0,click:2})}}function Mn(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function Wn(e,t,n){const l=e.slice();return l[22]=t[n],l[23]=t,l[24]=n,l}function Nn(e,t,n){const l=e.slice();return l[25]=t[n],l[27]=n,l}function Bn(e){let t,n=e[22].range.min+"";return{c(){t=f(n)},m(e,n){u(e,t,n)},p(e,l){4&l&&n!==(n=e[22].range.min+"")&&b(t,n)},d(e){e&&d(t)}}}function On(t){let n;return{c(){n=f("melee")},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function Hn(e){let t,n,l=e[22].range.max+"";return{c(){t=f("-"),n=f(l)},m(e,l){u(e,t,l),u(e,n,l)},p(e,t){4&t&&l!==(l=e[22].range.max+"")&&b(n,l)},d(e){e&&d(t),e&&d(n)}}}function In(e){let t,n,l=e[22].firepower.per+"";return{c(){t=f("/"),n=f(l)},m(e,l){u(e,t,l),u(e,n,l)},p(e,t){4&t&&l!==(l=e[22].firepower.per+"")&&b(n,l)},d(e){e&&d(t),e&&d(n)}}}function Dn(e){let t,n,l=e[22].damage.template+"";return{c(){t=f(l),n=f(",")},m(e,l){u(e,t,l),u(e,n,l)},p(e,n){4&n&&l!==(l=e[22].damage.template+"")&&b(t,l)},d(e){e&&d(t),e&&d(n)}}}function Gn(e){let t,n,l=e[22].damage.per+"";return{c(){t=f("/"),n=f(l)},m(e,l){u(e,t,l),u(e,n,l)},p(e,t){4&t&&l!==(l=e[22].damage.per+"")&&b(n,l)},d(e){e&&d(t),e&&d(n)}}}function Pn(e){let t;return{c(){t=f(",")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function jn(e){let t;return{c(){t=f(",")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function Jn(e){let t,n,l,r=e[25]+"",o=e[27]<e[22].rules.length-1&&jn();return{c(){t=f(r),n=g(),o&&o.c(),l=h()},m(e,r){u(e,t,r),u(e,n,r),o&&o.m(e,r),u(e,l,r)},p(e,n){4&n&&r!==(r=e[25]+"")&&b(t,r),e[27]<e[22].rules.length-1?o||(o=jn(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(e){e&&d(t),e&&d(n),o&&o.d(e),e&&d(l)}}}function zn(e){let t,n,l,r,o,a,i,h,v,y,$,x,k,A,S,C,E,T,R,q,_,M,W,N,B,O,I=e[22].firepower.value+"",D=e[22].damage.value+"";function G(){return e[7](e[22])}function P(t){e[8].call(null,t)}let j={click:G};function J(t){e[9].call(null,t,e[22])}void 0!==e[0]&&(j.edit=e[0]),l=new He({props:j}),L.push((()=>X(l,"edit",P)));let z={edit:e[0]};function F(e,t){return 0!==e[22].range.min||e[3]?Bn:On}void 0!==e[22].name&&(z.value=e[22].name),y=new We({props:z}),L.push((()=>X(y,"value",J)));let V=F(e),U=V(e),te=e[22].range.max>0&&Hn(e),ne=e[22].firepower.per&&In(e),le=e[22].damage.template&&Dn(e),re=e[22].damage.per&&Gn(e),oe=e[22].rules.length>0&&Pn(),ae=e[22].rules,ie=[];for(let t=0;t<ae.length;t+=1)ie[t]=Jn(Nn(e,ae,t));return{c(){t=p("tr"),n=p("td"),Y(l.$$.fragment),o=g(),a=p("img"),v=g(),Y(y.$$.fragment),x=g(),k=p("td"),U.c(),A=g(),te&&te.c(),S=g(),C=p("td"),E=f(I),T=g(),ne&&ne.c(),R=g(),q=p("td"),le&&le.c(),_=f(D),M=g(),re&&re.c(),W=g(),oe&&oe.c(),N=g();for(let e=0;e<ie.length;e+=1)ie[e].c();a.src!==(i=e[22].category+".png")&&w(a,"src",i),w(a,"alt",h=e[22].category),w(a,"width","12px"),w(n,"class","list vcenter name svelte-xhplsm"),w(k,"class","vcenter svelte-xhplsm"),w(C,"class","vcenter svelte-xhplsm"),w(q,"class","vcenter damage svelte-xhplsm"),w(t,"class",B=s(e[3]?"print":"fixed")+" svelte-xhplsm")},m(e,r){u(e,t,r),c(t,n),Q(l,n,null),c(n,o),c(n,a),c(n,v),Q(y,n,null),c(t,x),c(t,k),U.m(k,null),c(k,A),te&&te.m(k,null),c(t,S),c(t,C),c(C,E),c(C,T),ne&&ne.m(C,null),c(t,R),c(t,q),le&&le.m(q,null),c(q,_),c(q,M),re&&re.m(q,null),c(q,W),oe&&oe.m(q,null),c(q,N);for(let e=0;e<ie.length;e+=1)ie[e].m(q,null);O=!0},p(n,o){e=n;const c={};6&o&&(c.click=G),!r&&1&o&&(r=!0,c.edit=e[0],H((()=>r=!1))),l.$set(c),(!O||4&o&&a.src!==(i=e[22].category+".png"))&&w(a,"src",i),(!O||4&o&&h!==(h=e[22].category))&&w(a,"alt",h);const u={};if(1&o&&(u.edit=e[0]),!$&&4&o&&($=!0,u.value=e[22].name,H((()=>$=!1))),y.$set(u),V===(V=F(e))&&U?U.p(e,o):(U.d(1),U=V(e),U&&(U.c(),U.m(k,A))),e[22].range.max>0?te?te.p(e,o):(te=Hn(e),te.c(),te.m(k,null)):te&&(te.d(1),te=null),(!O||4&o)&&I!==(I=e[22].firepower.value+"")&&b(E,I),e[22].firepower.per?ne?ne.p(e,o):(ne=In(e),ne.c(),ne.m(C,null)):ne&&(ne.d(1),ne=null),e[22].damage.template?le?le.p(e,o):(le=Dn(e),le.c(),le.m(q,_)):le&&(le.d(1),le=null),(!O||4&o)&&D!==(D=e[22].damage.value+"")&&b(_,D),e[22].damage.per?re?re.p(e,o):(re=Gn(e),re.c(),re.m(q,W)):re&&(re.d(1),re=null),e[22].rules.length>0?oe||(oe=Pn(),oe.c(),oe.m(q,N)):oe&&(oe.d(1),oe=null),4&o){let t;for(ae=e[22].rules,t=0;t<ae.length;t+=1){const n=Nn(e,ae,t);ie[t]?ie[t].p(n,o):(ie[t]=Jn(n),ie[t].c(),ie[t].m(q,null))}for(;t<ie.length;t+=1)ie[t].d(1);ie.length=ae.length}(!O||8&o&&B!==(B=s(e[3]?"print":"fixed")+" svelte-xhplsm"))&&w(t,"class",B)},i(e){O||(K(l.$$.fragment,e),K(y.$$.fragment,e),O=!0)},o(e){Z(l.$$.fragment,e),Z(y.$$.fragment,e),O=!1},d(e){e&&d(t),ee(l),ee(y),U.d(),te&&te.d(),ne&&ne.d(),le&&le.d(),re&&re.d(),oe&&oe.d(),m(ie,e)}}}function Fn(e){let t,n=Array(4-e[2].weapons.length),l=[];for(let t=0;t<n.length;t+=1)l[t]=Kn(Mn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=h()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);u(e,t,n)},p(e,r){if(12&r){let o;for(n=Array(4-e[2].weapons.length),o=0;o<n.length;o+=1){const a=Mn(e,n,o);l[o]?l[o].p(a,r):(l[o]=Kn(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){m(l,e),e&&d(t)}}}function Kn(e){let t,n,l,r,o,a,i,m,f,h;return{c(){t=p("tr"),n=p("td"),l=g(),r=p("td"),o=g(),a=p("td"),i=g(),m=p("td"),f=g(),w(n,"class","list vcenter name svelte-xhplsm"),w(r,"class","list vcenter svelte-xhplsm"),w(a,"class","list vcenter svelte-xhplsm"),w(m,"class","list vcenter damage svelte-xhplsm"),w(t,"class",h=s(e[3]?"print":"fixed")+" svelte-xhplsm")},m(e,s){u(e,t,s),c(t,n),c(t,l),c(t,r),c(t,o),c(t,a),c(t,i),c(t,m),c(t,f)},p(e,n){8&n&&h!==(h=s(e[3]?"print":"fixed")+" svelte-xhplsm")&&w(t,"class",h)},d(e){e&&d(t)}}}function Zn(e){let t,n,l;function r(t){e[11].call(null,t)}let o={label:"Add ranged weapon",weaponSet:"ranged",click:e[10]};return void 0!==e[4]&&(o.selectedWeapon=e[4]),t=new _n({props:o}),L.push((()=>X(t,"selectedWeapon",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),l=!0},p(e,l){const r={};22&l&&(r.click=e[10]),!n&&16&l&&(n=!0,r.selectedWeapon=e[4],H((()=>n=!1))),t.$set(r)},i(e){l||(K(t.$$.fragment,e),l=!0)},o(e){Z(t.$$.fragment,e),l=!1},d(e){ee(t,e)}}}function Vn(e){let t,n,l;function r(t){e[13].call(null,t)}let o={label:"Add melee weapon",weaponSet:"melee",click:e[12]};return void 0!==e[5]&&(o.selectedWeapon=e[5]),t=new _n({props:o}),L.push((()=>X(t,"selectedWeapon",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),l=!0},p(e,l){const r={};38&l&&(r.click=e[12]),!n&&32&l&&(n=!0,r.selectedWeapon=e[5],H((()=>n=!1))),t.$set(r)},i(e){l||(K(t.$$.fragment,e),l=!0)},o(e){Z(t.$$.fragment,e),l=!1},d(e){ee(t,e)}}}function Un(e){let t,n,l;function r(t){e[15].call(null,t)}let o={label:"Add grenade",weaponSet:"grenades",click:e[14]};return void 0!==e[6]&&(o.selectedWeapon=e[6]),t=new _n({props:o}),L.push((()=>X(t,"selectedWeapon",r))),{c(){Y(t.$$.fragment)},m(e,n){Q(t,e,n),l=!0},p(e,l){const r={};70&l&&(r.click=e[14]),!n&&64&l&&(n=!0,r.selectedWeapon=e[6],H((()=>n=!1))),t.$set(r)},i(e){l||(K(t.$$.fragment,e),l=!0)},o(e){Z(t.$$.fragment,e),l=!1},d(e){ee(t,e)}}}function Xn(e){let t,n,l,r,o,a,i,s,f=e[2].weapons,h=[];for(let t=0;t<f.length;t+=1)h[t]=zn(Wn(e,f,t));const v=e=>Z(h[e],1,1,(()=>{h[e]=null}));let y=e[2].weapons.length<4&&Fn(e),b=e[2].options.rangedWeapon>0&&e[0]&&Zn(e),$=e[2].options.meleeWeapon>0&&e[0]&&Vn(e),x=e[2].options.grenade>0&&e[0]&&Un(e);return{c(){t=p("table"),n=p("tr"),n.innerHTML='<th class="name svelte-xhplsm">Weapon Type</th> \n    <th>Range</th> \n    <th>Firepower</th> \n    <th class="damage svelte-xhplsm">Damage</th>',l=g();for(let e=0;e<h.length;e+=1)h[e].c();r=g(),y&&y.c(),o=g(),b&&b.c(),a=g(),$&&$.c(),i=g(),x&&x.c(),w(t,"class","svelte-xhplsm")},m(e,d){u(e,t,d),c(t,n),c(t,l);for(let e=0;e<h.length;e+=1)h[e].m(t,null);c(t,r),y&&y.m(t,null),c(t,o),b&&b.m(t,null),c(t,a),$&&$.m(t,null),c(t,i),x&&x.m(t,null),s=!0},p(e,[n]){if(15&n){let l;for(f=e[2].weapons,l=0;l<f.length;l+=1){const o=Wn(e,f,l);h[l]?(h[l].p(o,n),K(h[l],1)):(h[l]=zn(o),h[l].c(),K(h[l],1),h[l].m(t,r))}for(z(),l=f.length;l<h.length;l+=1)v(l);F()}e[2].weapons.length<4?y?y.p(e,n):(y=Fn(e),y.c(),y.m(t,o)):y&&(y.d(1),y=null),e[2].options.rangedWeapon>0&&e[0]?b?(b.p(e,n),5&n&&K(b,1)):(b=Zn(e),b.c(),K(b,1),b.m(t,a)):b&&(z(),Z(b,1,1,(()=>{b=null})),F()),e[2].options.meleeWeapon>0&&e[0]?$?($.p(e,n),5&n&&K($,1)):($=Vn(e),$.c(),K($,1),$.m(t,i)):$&&(z(),Z($,1,1,(()=>{$=null})),F()),e[2].options.grenade>0&&e[0]?x?(x.p(e,n),5&n&&K(x,1)):(x=Un(e),x.c(),K(x,1),x.m(t,null)):x&&(z(),Z(x,1,1,(()=>{x=null})),F())},i(e){if(!s){for(let e=0;e<f.length;e+=1)K(h[e]);K(b),K($),K(x),s=!0}},o(e){h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)Z(h[e]);Z(b),Z($),Z(x),s=!1},d(e){e&&d(t),m(h,e),y&&y.d(),b&&b.d(),$&&$.d(),x&&x.d()}}}function Yn(e,t,n){let{edit:l=!1}=t,{crew:r}=t,{member:o}=t,{print:a=!1}=t,i=je.filter((e=>"grenade"!==e.category)).filter((e=>0!==e.range.max)),s=je.filter((e=>"grenade"!==e.category)).filter((e=>0===e.range.min)),c=je.filter((e=>"grenade"===e.category)),u=i[0].id,d=s[0].id,m=c[0].id;return e.$$set=e=>{"edit"in e&&n(0,l=e.edit),"crew"in e&&n(1,r=e.crew),"member"in e&&n(2,o=e.member),"print"in e&&n(3,a=e.print)},[l,r,o,a,u,d,m,e=>n(1,r=gt(e,o,r)),function(e){l=e,n(0,l)},function(e,t){t.name=e,n(2,o)},()=>n(1,r=st(u,"rangedWeapon",o,r)),function(e){u=e,n(4,u)},()=>n(1,r=st(d,"meleeWeapon",o,r)),function(e){d=e,n(5,d)},()=>n(1,r=st(m,"grenade",o,r)),function(e){m=e,n(6,m)}]}class Qn extends ne{constructor(e){super(),te(this,e,Yn,Xn,a,{edit:0,crew:1,member:2,print:3})}}function el(e){let t,n,l;return{c(){t=p("img"),t.src!==(n="soldier.png")&&w(t,"src","soldier.png"),w(t,"alt",l=e[2].name),w(t,"height",e[3])},m(e,n){u(e,t,n)},p(e,n){4&n&&l!==(l=e[2].name)&&w(t,"alt",l),8&n&&w(t,"height",e[3])},d(e){e&&d(t)}}}function tl(e){let t,n,l;return{c(){t=p("img"),t.src!==(n=e[2].photo)&&w(t,"src",n),w(t,"alt",l=e[2].name),w(t,"height",e[3])},m(e,n){u(e,t,n)},p(e,r){4&r&&t.src!==(n=e[2].photo)&&w(t,"src",n),4&r&&l!==(l=e[2].name)&&w(t,"alt",l),8&r&&w(t,"height",e[3])},d(e){e&&d(t)}}}function nl(e){let t,n,l,o,a,i,s,m,f,h,y;function b(t){e[7].call(null,t)}let $={click:e[6]};return void 0!==e[0]&&($.edit=e[0]),n=new He({props:$}),L.push((()=>X(n,"edit",b))),{c(){var e,l,r;t=p("div"),Y(n.$$.fragment),o=g(),a=p("img"),s=g(),m=p("input"),w(a,"class","upload"),a.src!==(i="https://static.thenounproject.com/png/625182-200.png")&&w(a,"src","https://static.thenounproject.com/png/625182-200.png"),w(a,"alt",""),w(a,"width","16"),e="display",l="none",m.style.setProperty(e,l,r?"important":""),w(m,"type","file"),w(m,"accept",".jpg, .jpeg, .png")},m(l,r){u(l,t,r),Q(n,t,null),c(t,o),c(t,a),c(t,s),c(t,m),e[10](m),f=!0,h||(y=[v(a,"click",e[8]),v(m,"change",e[9])],h=!0)},p(e,t){const r={};6&t&&(r.click=e[6]),!l&&1&t&&(l=!0,r.edit=e[0],H((()=>l=!1))),n.$set(r)},i(e){f||(K(n.$$.fragment,e),f=!0)},o(e){Z(n.$$.fragment,e),f=!1},d(l){l&&d(t),ee(n),e[10](null),h=!1,r(y)}}}function ll(e){let t,n,l;function r(e,t){return e[2].photo?tl:el}let o=r(e),a=o(e),i=e[0]&&nl(e);return{c(){a.c(),t=g(),i&&i.c(),n=h()},m(e,r){a.m(e,r),u(e,t,r),i&&i.m(e,r),u(e,n,r),l=!0},p(e,[l]){o===(o=r(e))&&a?a.p(e,l):(a.d(1),a=o(e),a&&(a.c(),a.m(t.parentNode,t))),e[0]?i?(i.p(e,l),1&l&&K(i,1)):(i=nl(e),i.c(),K(i,1),i.m(n.parentNode,n)):i&&(z(),Z(i,1,1,(()=>{i=null})),F())},i(e){l||(K(i),l=!0)},o(e){Z(i),l=!1},d(e){a.d(e),e&&d(t),i&&i.d(e),e&&d(n)}}}function rl(e,t,n){let l,{edit:r=!1}=t,{crew:o}=t,{member:a}=t,{height:i=128}=t,s=e=>{let t=e.target.files[0],l=new FileReader;l.readAsDataURL(t),l.onload=e=>{n(2,a.photo=e.target.result,a)}};return e.$$set=e=>{"edit"in e&&n(0,r=e.edit),"crew"in e&&n(1,o=e.crew),"member"in e&&n(2,a=e.member),"height"in e&&n(3,i=e.height)},[r,o,a,i,l,s,()=>n(1,o=ut(a,o)),function(e){r=e,n(0,r)},()=>{l.click()},e=>s(e),function(e){L[e?"unshift":"push"]((()=>{l=e,n(4,l)}))}]}class ol extends ne{constructor(e){super(),te(this,e,rl,ll,a,{edit:0,crew:1,member:2,height:3})}}let al=e=>{switch(e.skills.forEach(sl),e.weapons.forEach((t=>cl(t,e))),e.equipment.forEach((e=>il(e))),e.notes||(e.notes=""),e.leader=!!e.skills.find((e=>5===e.id)),e.cost){case 0:case 1:e.experience="Rookie";break;case 2:e.experience="Hardened";break;case 3:default:e.experience="Veteran"}return e},il=e=>{e.effects||(e.effects=JSON.parse(JSON.stringify(Je.find((t=>t.id===e.id)).effects)))},sl=e=>{e.effects||(e.effects=JSON.parse(JSON.stringify(Ge.find((t=>t.id===e.id)).effects)))},cl=(e,t)=>{if("Small Blast"===e.damage.template&&(e.damage.template="SBT"),"Large Blast"===e.damage.template&&(e.damage.template="LBT"),!e.option)if("grenade"===e.category)e.option="grenade";else if("melee"!==e.category)e.option="rangedWeapon";else{t.weapons.filter((t=>t!==e)).filter((e=>"grenade"!==e.category)).filter((e=>"melee"===e.category)).filter((e=>e.option)).length>0?e.option="meleeWeapon":e.option="rangedWeapon"}};var ul={validateModel:e=>(e.members.forEach(al),e.notes||(e.notes=""),e.artifacts||(e.artifacts=""),e.options||(e.options={}),e.options.startingEquipment||(e.options.startingEquipment=e.faction.startingEquipment),e),validateStat:(e,t,n)=>{let l=De.find((e=>e.id===t.id))[e];return t[e]<1?t[e]=1:t[e]>l+2&&!t.leader&&(t[e]=l+2),n},validateMember:al};function dl(e,t,n){const l=e.slice();return l[54]=t[n],l}function ml(e,t,n){const l=e.slice();return l[57]=t[n],l[58]=t,l[59]=n,l}function pl(e,t,n){const l=e.slice();return l[54]=t[n],l}function fl(e){let t;return{c(){t=f("Edit")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function gl(e){let t;return{c(){t=f("Lock")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function hl(e){let t;return{c(){t=f("Compact")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function vl(e){let t;return{c(){t=f("Full")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}function wl(e){let t,n,l,o,a,i,s,f,h,y,b=e[6],$=[];for(let t=0;t<b.length;t+=1)$[t]=yl(pl(e,b,t));return{c(){t=p("div"),n=p("label"),n.textContent="Add recruit",l=g(),o=p("select");for(let e=0;e<$.length;e+=1)$[e].c();a=g(),i=p("button"),i.textContent="Add",s=g(),f=p("button"),f.textContent="Save",w(n,"for","recruit"),w(o,"id","recruit"),void 0===e[4]&&O((()=>e[15].call(o)))},m(r,d){u(r,t,d),c(t,n),c(t,l),c(t,o);for(let e=0;e<$.length;e+=1)$[e].m(o,null);x(o,e[4]),c(t,a),c(t,i),u(r,s,d),u(r,f,d),h||(y=[v(o,"change",e[15]),v(i,"click",e[16]),v(f,"click",e[7])],h=!0)},p(e,t){if(64&t[0]){let n;for(b=e[6],n=0;n<b.length;n+=1){const l=pl(e,b,n);$[n]?$[n].p(l,t):($[n]=yl(l),$[n].c(),$[n].m(o,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=b.length}80&t[0]&&x(o,e[4])},d(e){e&&d(t),m($,e),e&&d(s),e&&d(f),h=!1,r(y)}}}function yl(t){let n,l,r=t[54].name+"";return{c(){n=p("option"),l=f(r),n.__value=t[54].id,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function bl(e){let t,n,l,o,a,i,s,m,f,h,y,b,$,x,k,A;return{c(){t=p("div"),n=p("span"),n.textContent="Crew Export:",l=g(),o=p("br"),a=g(),i=p("textarea"),s=g(),m=p("button"),m.textContent="Copy",f=g(),h=p("button"),h.textContent="Hide",y=g(),b=p("br"),$=g(),x=p("span"),x.textContent="Copy above string and store it somewhere.",w(i,"class","expString svelte-n9zw5n"),w(i,"id","exportArea"),i.value=e[5],w(t,"class","export svelte-n9zw5n")},m(r,d){u(r,t,d),c(t,n),c(t,l),c(t,o),c(t,a),c(t,i),c(t,s),c(t,m),c(t,f),c(t,h),c(t,y),c(t,b),c(t,$),c(t,x),k||(A=[v(m,"click",e[17]),v(h,"click",e[18])],k=!0)},p(e,t){32&t[0]&&(i.value=e[5])},d(e){e&&d(t),k=!1,r(A)}}}function $l(e){let t,n,l,r=e[57].experience+"";return{c(){t=f("("),n=f(r),l=f(")")},m(e,r){u(e,t,r),u(e,n,r),u(e,l,r)},p(e,t){1&t[0]&&r!==(r=e[57].experience+"")&&b(n,r)},d(e){e&&d(t),e&&d(n),e&&d(l)}}}function xl(e){let t,n,l,r,o,a,i,s,m,h,v,y,$,x,k,A,S,C,E,T,R,q,_,M,W,N,B,O,I,D,G,P,j,J,z,F,V,U,te,ne,le,re,oe,ae,ie,se,ce,ue,de,me,pe,fe,ge,he,ve,we,ye,be,$e,xe,ke,Ae,Se,Ce,Ee,Te,Re,Le,qe,_e,Me,Ne,Be,Oe,Ie,De,Ge,Pe,je,Je,ze,Fe,Ke,Ze,Ve,Ue,Xe,Ye,Qe,et,tt,nt,lt,rt,ot,at,it,st=e[0].faction.name+"",ct=e[57].armor+"";function ut(){return e[21](e[57])}function dt(t){e[22].call(null,t)}let mt={click:ut};function pt(t){e[23].call(null,t)}function ft(t){e[24].call(null,t,e[57],e[58],e[59])}function gt(t){e[25].call(null,t)}void 0!==e[1]&&(mt.edit=e[1]),o=new He({props:mt}),L.push((()=>X(o,"edit",dt)));let ht={};function vt(t){e[26].call(null,t,e[57])}void 0!==e[1]&&(ht.edit=e[1]),void 0!==e[57]&&(ht.member=e[57]),void 0!==e[0]&&(ht.crew=e[0]),v=new ol({props:ht}),L.push((()=>X(v,"edit",pt))),L.push((()=>X(v,"member",ft))),L.push((()=>X(v,"crew",gt)));let wt={edit:e[1]};function yt(){return e[27](e[57])}function bt(t){e[28].call(null,t,e[57])}void 0!==e[57].name&&(wt.value=e[57].name),E=new We({props:wt}),L.push((()=>X(E,"value",vt)));let $t={edit:e[1],type:"number",change:yt};function xt(){return e[29](e[57])}function kt(t){e[30].call(null,t,e[57])}void 0!==e[57].wounds&&($t.value=e[57].wounds),P=new We({props:$t}),L.push((()=>X(P,"value",bt)));let At={edit:e[1],type:"number",change:xt};void 0!==e[57].cost&&(At.value=e[57].cost),te=new We({props:At}),L.push((()=>X(te,"value",kt)));let St=!e[2]&&$l(e);function Ct(){return e[31](e[57])}function Et(t){e[32].call(null,t,e[57])}let Tt={edit:e[1],type:"number",change:Ct};function Rt(){return e[33](e[57])}function Lt(t){e[34].call(null,t,e[57])}void 0!==e[57].movement&&(Tt.value=e[57].movement),ce=new We({props:Tt}),L.push((()=>X(ce,"value",Et)));let qt={edit:e[1],type:"number",change:Rt};function _t(){return e[35](e[57])}function Mt(t){e[36].call(null,t,e[57])}void 0!==e[57].combatAbility&&(qt.value=e[57].combatAbility),he=new We({props:qt}),L.push((()=>X(he,"value",Lt)));let Wt={edit:e[1],type:"number",change:_t};function Nt(t){e[37].call(null,t)}function Bt(t){e[38].call(null,t,e[57],e[58],e[59])}function Ot(t){e[39].call(null,t)}function Ht(t){e[40].call(null,t)}void 0!==e[57].will&&(Wt.value=e[57].will),Re=new We({props:Wt}),L.push((()=>X(Re,"value",Mt)));let It={};function Dt(t){e[41].call(null,t)}function Gt(t){e[42].call(null,t,e[57],e[58],e[59])}function Pt(t){e[43].call(null,t)}function jt(t){e[44].call(null,t)}void 0!==e[0]&&(It.crew=e[0]),void 0!==e[57]&&(It.member=e[57]),void 0!==e[2]&&(It.compact=e[2]),void 0!==e[1]&&(It.edit=e[1]),_e=new zt({props:It}),L.push((()=>X(_e,"crew",Nt))),L.push((()=>X(_e,"member",Bt))),L.push((()=>X(_e,"compact",Ot))),L.push((()=>X(_e,"edit",Ht)));let Jt={};function Ft(t){e[45].call(null,t)}function Kt(t){e[46].call(null,t,e[57],e[58],e[59])}function Zt(t){e[47].call(null,t)}void 0!==e[0]&&(Jt.crew=e[0]),void 0!==e[57]&&(Jt.member=e[57]),void 0!==e[2]&&(Jt.compact=e[2]),void 0!==e[1]&&(Jt.edit=e[1]),De=new En({props:Jt}),L.push((()=>X(De,"crew",Dt))),L.push((()=>X(De,"member",Gt))),L.push((()=>X(De,"compact",Pt))),L.push((()=>X(De,"edit",jt)));let Vt={};function Ut(t){e[48].call(null,t,e[57])}void 0!==e[0]&&(Vt.crew=e[0]),void 0!==e[57]&&(Vt.member=e[57]),void 0!==e[1]&&(Vt.edit=e[1]),Fe=new Qn({props:Vt}),L.push((()=>X(Fe,"crew",Ft))),L.push((()=>X(Fe,"member",Kt))),L.push((()=>X(Fe,"edit",Zt)));let Xt={type:"textarea",edit:e[1]};return void 0!==e[57].notes&&(Xt.value=e[57].notes),nt=new We({props:Xt}),L.push((()=>X(nt,"value",Ut))),{c(){t=p("div"),n=p("table"),l=p("tr"),r=p("td"),Y(o.$$.fragment),s=g(),m=p("tr"),h=p("td"),Y(v.$$.fragment),k=g(),A=p("th"),A.textContent="Name",S=g(),C=p("td"),Y(E.$$.fragment),R=g(),q=p("tr"),_=p("th"),_.textContent="Faction",M=g(),W=p("td"),N=f(st),B=g(),O=p("tr"),I=p("th"),I.textContent="Wounds",D=g(),G=p("td"),Y(P.$$.fragment),J=g(),z=p("tr"),F=p("th"),F.textContent="Combat XP",V=g(),U=p("td"),Y(te.$$.fragment),le=g(),St&&St.c(),re=g(),oe=p("tr"),ae=p("th"),ae.textContent="Movement",ie=g(),se=p("td"),Y(ce.$$.fragment),de=g(),me=p("tr"),pe=p("th"),pe.textContent="Combat Ability",fe=g(),ge=p("td"),Y(he.$$.fragment),we=g(),ye=p("tr"),be=p("th"),be.textContent="Armor",$e=g(),xe=p("td"),ke=f(ct),Ae=g(),Se=p("tr"),Ce=p("th"),Ce.textContent="Will",Ee=g(),Te=p("td"),Y(Re.$$.fragment),qe=g(),Y(_e.$$.fragment),Ie=g(),Y(De.$$.fragment),ze=g(),Y(Fe.$$.fragment),Ue=g(),Xe=p("table"),Ye=p("tr"),Ye.innerHTML="<th>Notes</th>",Qe=g(),et=p("tr"),tt=p("td"),Y(nt.$$.fragment),rt=g(),ot=p("div"),at=g(),w(r,"colspan","3"),w(l,"class",i="no-print "+(e[1]?"":"hide")+" svelte-n9zw5n"),w(h,"rowspan","8"),w(A,"class","r svelte-n9zw5n"),w(C,"class","l svelte-n9zw5n"),w(_,"class","r svelte-n9zw5n"),w(W,"class","l svelte-n9zw5n"),w(I,"class","r svelte-n9zw5n"),w(G,"class","l svelte-n9zw5n"),w(F,"class","r svelte-n9zw5n"),w(U,"class","l svelte-n9zw5n"),w(ae,"class","r svelte-n9zw5n"),w(se,"class","l svelte-n9zw5n"),w(pe,"class","r svelte-n9zw5n"),w(ge,"class","l svelte-n9zw5n"),w(be,"class","r svelte-n9zw5n"),w(xe,"class","l svelte-n9zw5n"),w(Ce,"class","r svelte-n9zw5n"),w(Te,"class","l svelte-n9zw5n"),w(Ye,"class","wide"),w(tt,"class","wide fixed"),w(et,"class","list wide"),w(ot,"class","pagebreak"),w(t,"class","grid-item")},m(e,a){u(e,t,a),c(t,n),c(n,l),c(l,r),Q(o,r,null),c(n,s),c(n,m),c(m,h),Q(v,h,null),c(m,k),c(m,A),c(m,S),c(m,C),Q(E,C,null),c(n,R),c(n,q),c(q,_),c(q,M),c(q,W),c(W,N),c(n,B),c(n,O),c(O,I),c(O,D),c(O,G),Q(P,G,null),c(n,J),c(n,z),c(z,F),c(z,V),c(z,U),Q(te,U,null),c(U,le),St&&St.m(U,null),c(n,re),c(n,oe),c(oe,ae),c(oe,ie),c(oe,se),Q(ce,se,null),c(n,de),c(n,me),c(me,pe),c(me,fe),c(me,ge),Q(he,ge,null),c(n,we),c(n,ye),c(ye,be),c(ye,$e),c(ye,xe),c(xe,ke),c(n,Ae),c(n,Se),c(Se,Ce),c(Se,Ee),c(Se,Te),Q(Re,Te,null),c(t,qe),Q(_e,t,null),c(t,Ie),Q(De,t,null),c(t,ze),Q(Fe,t,null),c(t,Ue),c(t,Xe),c(Xe,Ye),c(Xe,Qe),c(Xe,et),c(et,tt),Q(nt,tt,null),c(t,rt),c(t,ot),c(t,at),it=!0},p(t,n){e=t;const r={};9&n[0]&&(r.click=ut),!a&&2&n[0]&&(a=!0,r.edit=e[1],H((()=>a=!1))),o.$set(r),(!it||2&n[0]&&i!==(i="no-print "+(e[1]?"":"hide")+" svelte-n9zw5n"))&&w(l,"class",i);const s={};!y&&2&n[0]&&(y=!0,s.edit=e[1],H((()=>y=!1))),!$&&1&n[0]&&($=!0,s.member=e[57],H((()=>$=!1))),!x&&1&n[0]&&(x=!0,s.crew=e[0],H((()=>x=!1))),v.$set(s);const c={};2&n[0]&&(c.edit=e[1]),!T&&1&n[0]&&(T=!0,c.value=e[57].name,H((()=>T=!1))),E.$set(c),(!it||1&n[0])&&st!==(st=e[0].faction.name+"")&&b(N,st);const u={};2&n[0]&&(u.edit=e[1]),1&n[0]&&(u.change=yt),!j&&1&n[0]&&(j=!0,u.value=e[57].wounds,H((()=>j=!1))),P.$set(u);const d={};2&n[0]&&(d.edit=e[1]),1&n[0]&&(d.change=xt),!ne&&1&n[0]&&(ne=!0,d.value=e[57].cost,H((()=>ne=!1))),te.$set(d),e[2]?St&&(St.d(1),St=null):St?St.p(e,n):(St=$l(e),St.c(),St.m(U,null));const m={};2&n[0]&&(m.edit=e[1]),1&n[0]&&(m.change=Ct),!ue&&1&n[0]&&(ue=!0,m.value=e[57].movement,H((()=>ue=!1))),ce.$set(m);const p={};2&n[0]&&(p.edit=e[1]),1&n[0]&&(p.change=Rt),!ve&&1&n[0]&&(ve=!0,p.value=e[57].combatAbility,H((()=>ve=!1))),he.$set(p),(!it||1&n[0])&&ct!==(ct=e[57].armor+"")&&b(ke,ct);const f={};2&n[0]&&(f.edit=e[1]),1&n[0]&&(f.change=_t),!Le&&1&n[0]&&(Le=!0,f.value=e[57].will,H((()=>Le=!1))),Re.$set(f);const g={};!Me&&1&n[0]&&(Me=!0,g.crew=e[0],H((()=>Me=!1))),!Ne&&1&n[0]&&(Ne=!0,g.member=e[57],H((()=>Ne=!1))),!Be&&4&n[0]&&(Be=!0,g.compact=e[2],H((()=>Be=!1))),!Oe&&2&n[0]&&(Oe=!0,g.edit=e[1],H((()=>Oe=!1))),_e.$set(g);const h={};!Ge&&1&n[0]&&(Ge=!0,h.crew=e[0],H((()=>Ge=!1))),!Pe&&1&n[0]&&(Pe=!0,h.member=e[57],H((()=>Pe=!1))),!je&&4&n[0]&&(je=!0,h.compact=e[2],H((()=>je=!1))),!Je&&2&n[0]&&(Je=!0,h.edit=e[1],H((()=>Je=!1))),De.$set(h);const k={};!Ke&&1&n[0]&&(Ke=!0,k.crew=e[0],H((()=>Ke=!1))),!Ze&&1&n[0]&&(Ze=!0,k.member=e[57],H((()=>Ze=!1))),!Ve&&2&n[0]&&(Ve=!0,k.edit=e[1],H((()=>Ve=!1))),Fe.$set(k);const A={};2&n[0]&&(A.edit=e[1]),!lt&&1&n[0]&&(lt=!0,A.value=e[57].notes,H((()=>lt=!1))),nt.$set(A)},i(e){it||(K(o.$$.fragment,e),K(v.$$.fragment,e),K(E.$$.fragment,e),K(P.$$.fragment,e),K(te.$$.fragment,e),K(ce.$$.fragment,e),K(he.$$.fragment,e),K(Re.$$.fragment,e),K(_e.$$.fragment,e),K(De.$$.fragment,e),K(Fe.$$.fragment,e),K(nt.$$.fragment,e),it=!0)},o(e){Z(o.$$.fragment,e),Z(v.$$.fragment,e),Z(E.$$.fragment,e),Z(P.$$.fragment,e),Z(te.$$.fragment,e),Z(ce.$$.fragment,e),Z(he.$$.fragment,e),Z(Re.$$.fragment,e),Z(_e.$$.fragment,e),Z(De.$$.fragment,e),Z(Fe.$$.fragment,e),Z(nt.$$.fragment,e),it=!1},d(e){e&&d(t),ee(o),ee(v),ee(E),ee(P),ee(te),St&&St.d(),ee(ce),ee(he),ee(Re),ee(_e),ee(De),ee(Fe),ee(nt)}}}function kl(e){let t,n,l,o,a,i,s,f,y,b,$,k,A,S,C=e[6],E=[];for(let t=0;t<C.length;t+=1)E[t]=Al(dl(e,C,t));let T=e[3]&&Sl(e);return{c(){t=p("div"),n=p("label"),n.textContent="Add recruit",l=g(),o=p("select");for(let e=0;e<E.length;e+=1)E[e].c();a=g(),i=p("button"),i.textContent="Add",s=g(),f=p("button"),f.textContent="Save",y=g(),b=p("button"),b.textContent="Debug",$=g(),T&&T.c(),k=h(),w(n,"for","recruit"),w(o,"id","recruit"),void 0===e[4]&&O((()=>e[49].call(o)))},m(r,d){u(r,t,d),c(t,n),c(t,l),c(t,o);for(let e=0;e<E.length;e+=1)E[e].m(o,null);x(o,e[4]),c(t,a),c(t,i),u(r,s,d),u(r,f,d),u(r,y,d),u(r,b,d),u(r,$,d),T&&T.m(r,d),u(r,k,d),A||(S=[v(o,"change",e[49]),v(i,"click",e[50]),v(f,"click",e[7]),v(b,"click",e[51])],A=!0)},p(e,t){if(64&t[0]){let n;for(C=e[6],n=0;n<C.length;n+=1){const l=dl(e,C,n);E[n]?E[n].p(l,t):(E[n]=Al(l),E[n].c(),E[n].m(o,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=C.length}80&t[0]&&x(o,e[4]),e[3]?T?T.p(e,t):(T=Sl(e),T.c(),T.m(k.parentNode,k)):T&&(T.d(1),T=null)},d(e){e&&d(t),m(E,e),e&&d(s),e&&d(f),e&&d(y),e&&d(b),e&&d($),T&&T.d(e),e&&d(k),A=!1,r(S)}}}function Al(t){let n,l,r=t[54].name+"";return{c(){n=p("option"),l=f(r),n.__value=t[54].id,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function Sl(e){let t,n,l=JSON.stringify(e[0],null,2)+"";return{c(){t=p("div"),n=f(l)},m(e,l){u(e,t,l),c(t,n)},p(e,t){1&t[0]&&l!==(l=JSON.stringify(e[0],null,2)+"")&&b(n,l)},d(e){e&&d(t)}}}function Cl(e){let t,n,l,o,a,i,s,f,y,b,$,x,k,A,S,C,E,T,R,q,_,M,W,N,B;function O(e,t){return e[1]?gl:fl}t=new xe({props:{click:e[10]}});let I=O(e),D=I(e);function G(e,t){return e[2]?vl:hl}let P=G(e),j=P(e),J=e[1]&&wl(e),V=e[5]&&bl(e);function U(t){e[19].call(null,t)}function te(t){e[20].call(null,t)}let ne={};void 0!==e[0]&&(ne.crew=e[0]),void 0!==e[1]&&(ne.edit=e[1]),A=new qt({props:ne}),L.push((()=>X(A,"crew",U))),L.push((()=>X(A,"edit",te)));let le=e[0].members,re=[];for(let t=0;t<le.length;t+=1)re[t]=xl(ml(e,le,t));const oe=e=>Z(re[e],1,1,(()=>{re[e]=null}));let ae=e[1]&&kl(e);return{c(){Y(t.$$.fragment),n=g(),l=p("div"),o=p("button"),D.c(),a=g(),i=p("button"),j.c(),s=g(),f=p("button"),f.textContent="Print View",y=g(),b=p("button"),b.textContent="Export",$=g(),J&&J.c(),x=g(),V&&V.c(),k=g(),Y(A.$$.fragment),E=g(),T=p("div"),R=g(),q=p("div");for(let e=0;e<re.length;e+=1)re[e].c();_=g(),ae&&ae.c(),M=h(),w(l,"class","no-print"),w(T,"class","pagebreak"),w(q,"class","grid-container")},m(r,d){Q(t,r,d),u(r,n,d),u(r,l,d),c(l,o),D.m(o,null),c(l,a),c(l,i),j.m(i,null),c(l,s),c(l,f),c(l,y),c(l,b),u(r,$,d),J&&J.m(r,d),u(r,x,d),V&&V.m(r,d),u(r,k,d),Q(A,r,d),u(r,E,d),u(r,T,d),u(r,R,d),u(r,q,d);for(let e=0;e<re.length;e+=1)re[e].m(q,null);u(r,_,d),ae&&ae.m(r,d),u(r,M,d),W=!0,N||(B=[v(o,"click",e[11]),v(i,"click",e[12]),v(f,"click",e[13]),v(b,"click",e[14])],N=!0)},p(e,t){I!==(I=O(e))&&(D.d(1),D=I(e),D&&(D.c(),D.m(o,null))),P!==(P=G(e))&&(j.d(1),j=P(e),j&&(j.c(),j.m(i,null))),e[1]?J?J.p(e,t):(J=wl(e),J.c(),J.m(x.parentNode,x)):J&&(J.d(1),J=null),e[5]?V?V.p(e,t):(V=bl(e),V.c(),V.m(k.parentNode,k)):V&&(V.d(1),V=null);const n={};if(!S&&1&t[0]&&(S=!0,n.crew=e[0],H((()=>S=!1))),!C&&2&t[0]&&(C=!0,n.edit=e[1],H((()=>C=!1))),A.$set(n),271&t[0]){let n;for(le=e[0].members,n=0;n<le.length;n+=1){const l=ml(e,le,n);re[n]?(re[n].p(l,t),K(re[n],1)):(re[n]=xl(l),re[n].c(),K(re[n],1),re[n].m(q,null))}for(z(),n=le.length;n<re.length;n+=1)oe(n);F()}e[1]?ae?ae.p(e,t):(ae=kl(e),ae.c(),ae.m(M.parentNode,M)):ae&&(ae.d(1),ae=null)},i(e){if(!W){K(t.$$.fragment,e),K(A.$$.fragment,e);for(let e=0;e<le.length;e+=1)K(re[e]);W=!0}},o(e){Z(t.$$.fragment,e),Z(A.$$.fragment,e),re=re.filter(Boolean);for(let e=0;e<re.length;e+=1)Z(re[e]);W=!1},d(e){ee(t,e),e&&d(n),e&&d(l),D.d(),j.d(),e&&d($),J&&J.d(e),e&&d(x),V&&V.d(e),e&&d(k),ee(A,e),e&&d(E),e&&d(T),e&&d(R),e&&d(q),m(re,e),e&&d(_),ae&&ae.d(e),e&&d(M),N=!1,r(B)}}}function El(e,t,n){let l;!function(e,t,n){e.$$.on_destroy.push(i(t,n))}(e,me,(e=>n(52,l=e)));let{params:r={}}=t,o="new"===r.crew?lt("",0):ye.crews.find((e=>e.id===r.crew));console.log(o);let a=l.endsWith("edit"),s=!0,c=!1;o=ul.validateModel(o);let u,d,m=De.filter((e=>"Leader"!==e.name));function p(){let e=ye.crews.findIndex((e=>e.id===o.id));-1!==e?ye.crews.splice(e,1,o):ye.crews.push(o),ye.save(ye.crews),fe("/crew/"+o.id+"/edit")}function f(e,t){n(0,o=ht(o)),t=ul.validateMember(t),n(0,o=ul.validateStat(e,t,o))}return e.$$set=e=>{"params"in e&&n(9,r=e.params)},[o,a,s,c,u,d,m,p,f,r,()=>p(),()=>fe("/crew/"+o.id+"/"+(a?"view":"edit")),()=>n(2,s=!s),()=>pe("/print/"+o.id),()=>n(5,d=ye.exportCrew(o.id)),function(){u=k(this),n(4,u),n(6,m)},()=>n(0,o=rt(u,o,c)),()=>(document.querySelector("#exportArea").select(),void document.execCommand("copy")),()=>n(5,d=void 0),function(e){o=e,n(0,o)},function(e){a=e,n(1,a)},e=>n(0,o=dt(e,o,c)),function(e){a=e,n(1,a)},function(e){a=e,n(1,a)},function(e,t,l,r){l[r]=e,n(0,o)},function(e){o=e,n(0,o)},function(e,t){t.name=e,n(0,o)},e=>f("wounds",e),function(e,t){t.wounds=e,n(0,o)},e=>f("cost",e),function(e,t){t.cost=e,n(0,o)},e=>f("movement",e),function(e,t){t.movement=e,n(0,o)},e=>f("combatAbility",e),function(e,t){t.combatAbility=e,n(0,o)},e=>f("will",e),function(e,t){t.will=e,n(0,o)},function(e){o=e,n(0,o)},function(e,t,l,r){l[r]=e,n(0,o)},function(e){s=e,n(2,s)},function(e){a=e,n(1,a)},function(e){o=e,n(0,o)},function(e,t,l,r){l[r]=e,n(0,o)},function(e){s=e,n(2,s)},function(e){a=e,n(1,a)},function(e){o=e,n(0,o)},function(e,t,l,r){l[r]=e,n(0,o)},function(e){a=e,n(1,a)},function(e,t){t.notes=e,n(0,o)},function(){u=k(this),n(4,u),n(6,m)},()=>n(0,o=rt(u,o,c)),()=>n(3,c=!c)]}class Tl extends ne{constructor(e){super(),te(this,e,El,Cl,a,{params:9},[-1,-1])}}function Rl(e,t,n){const l=e.slice();return l[10]=t[n],l[11]=t,l[12]=n,l}function Ll(e){let t,n,l,r,o,a,i,s,m,h,v,y,$,x,k,A,S,C,E,T,R,q,_,M,W,N,B,O,I,D,G,P,j,J,z,F,V,U,te,ne,le,re,oe,ae,ie,se,ce,ue,de,me,pe,fe,ge,he,ve,we,ye,be,$e,xe,ke,Ae,Se,Ce,Ee,Te,Re,Le,qe,_e=e[10].name+"",Me=e[0].faction.name+"",Ne=e[10].wounds+"",Be=e[10].cost+"",Oe=e[10].movement+"",He=e[10].combatAbility+"",Ie=e[10].armor+"",De=e[10].will+"";function Ge(t){e[6].call(null,t,e[10])}o=new ol({props:{edit:_l,member:e[10],crew:e[0],height:"96"}}),he=new zt({props:{crew:e[0],member:e[10]}}),we=new En({props:{crew:e[0],member:e[10],print:"true"}}),be=new Qn({props:{crew:e[0],member:e[10],print:"true"}});let Pe={type:"textarea",edit:_l};void 0!==e[10].notes&&(Pe.value=e[10].notes),Ee=new We({props:Pe}),L.push((()=>X(Ee,"value",Ge)));let je=(e[12]+1)%4==0&&function(e){let t;return{c(){t=p("div"),w(t,"class","pagebreak")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}();return{c(){t=p("div"),n=p("table"),l=p("tr"),r=p("td"),Y(o.$$.fragment),a=g(),i=p("th"),i.textContent="Name",s=g(),m=p("td"),h=f(_e),v=g(),y=p("tr"),$=p("th"),$.textContent="Faction",x=g(),k=p("td"),A=f(Me),S=g(),C=p("tr"),E=p("th"),E.textContent="Wounds",T=g(),R=p("td"),q=f(Ne),_=g(),M=p("tr"),W=p("th"),W.textContent="Combat XP",N=g(),B=p("td"),O=f(Be),I=g(),D=p("tr"),G=p("th"),G.textContent="Movement",P=g(),j=p("td"),J=f(Oe),z=g(),F=p("tr"),V=p("th"),V.textContent="Combat Ability",U=g(),te=p("td"),ne=f(He),le=g(),re=p("tr"),oe=p("th"),oe.textContent="Armor",ae=g(),ie=p("td"),se=f(Ie),ce=g(),ue=p("tr"),de=p("th"),de.textContent="Will",me=g(),pe=p("td"),fe=f(De),ge=g(),Y(he.$$.fragment),ve=g(),Y(we.$$.fragment),ye=g(),Y(be.$$.fragment),$e=g(),xe=p("table"),ke=p("tr"),ke.innerHTML='<th class="svelte-mltogt">Notes</th>',Ae=g(),Se=p("tr"),Ce=p("td"),Y(Ee.$$.fragment),Re=g(),je&&je.c(),Le=g(),w(r,"rowspan","8"),w(r,"class","svelte-mltogt"),w(i,"class","r svelte-mltogt"),w(m,"class","l svelte-mltogt"),w($,"class","r svelte-mltogt"),w(k,"class","l svelte-mltogt"),w(E,"class","r svelte-mltogt"),w(R,"class","l svelte-mltogt"),w(W,"class","r svelte-mltogt"),w(B,"class","l svelte-mltogt"),w(G,"class","r svelte-mltogt"),w(j,"class","l svelte-mltogt"),w(V,"class","r svelte-mltogt"),w(te,"class","l svelte-mltogt"),w(oe,"class","r svelte-mltogt"),w(ie,"class","l svelte-mltogt"),w(de,"class","r svelte-mltogt"),w(pe,"class","l svelte-mltogt"),w(n,"class","svelte-mltogt"),w(ke,"class","wide"),w(Ce,"class","wide svelte-mltogt"),w(Se,"class","list wide notes svelte-mltogt"),w(xe,"class","svelte-mltogt"),w(t,"class","wrapper svelte-mltogt")},m(e,d){u(e,t,d),c(t,n),c(n,l),c(l,r),Q(o,r,null),c(l,a),c(l,i),c(l,s),c(l,m),c(m,h),c(n,v),c(n,y),c(y,$),c(y,x),c(y,k),c(k,A),c(n,S),c(n,C),c(C,E),c(C,T),c(C,R),c(R,q),c(n,_),c(n,M),c(M,W),c(M,N),c(M,B),c(B,O),c(n,I),c(n,D),c(D,G),c(D,P),c(D,j),c(j,J),c(n,z),c(n,F),c(F,V),c(F,U),c(F,te),c(te,ne),c(n,le),c(n,re),c(re,oe),c(re,ae),c(re,ie),c(ie,se),c(n,ce),c(n,ue),c(ue,de),c(ue,me),c(ue,pe),c(pe,fe),c(t,ge),Q(he,t,null),c(t,ve),Q(we,t,null),c(t,ye),Q(be,t,null),c(t,$e),c(t,xe),c(xe,ke),c(xe,Ae),c(xe,Se),c(Se,Ce),Q(Ee,Ce,null),c(t,Re),je&&je.m(t,null),c(t,Le),qe=!0},p(t,n){e=t;const l={};1&n&&(l.member=e[10]),1&n&&(l.crew=e[0]),o.$set(l),(!qe||1&n)&&_e!==(_e=e[10].name+"")&&b(h,_e),(!qe||1&n)&&Me!==(Me=e[0].faction.name+"")&&b(A,Me),(!qe||1&n)&&Ne!==(Ne=e[10].wounds+"")&&b(q,Ne),(!qe||1&n)&&Be!==(Be=e[10].cost+"")&&b(O,Be),(!qe||1&n)&&Oe!==(Oe=e[10].movement+"")&&b(J,Oe),(!qe||1&n)&&He!==(He=e[10].combatAbility+"")&&b(ne,He),(!qe||1&n)&&Ie!==(Ie=e[10].armor+"")&&b(se,Ie),(!qe||1&n)&&De!==(De=e[10].will+"")&&b(fe,De);const r={};1&n&&(r.crew=e[0]),1&n&&(r.member=e[10]),he.$set(r);const a={};1&n&&(a.crew=e[0]),1&n&&(a.member=e[10]),we.$set(a);const i={};1&n&&(i.crew=e[0]),1&n&&(i.member=e[10]),be.$set(i);const s={};!Te&&1&n&&(Te=!0,s.value=e[10].notes,H((()=>Te=!1))),Ee.$set(s)},i(e){qe||(K(o.$$.fragment,e),K(he.$$.fragment,e),K(we.$$.fragment,e),K(be.$$.fragment,e),K(Ee.$$.fragment,e),qe=!0)},o(e){Z(o.$$.fragment,e),Z(he.$$.fragment,e),Z(we.$$.fragment,e),Z(be.$$.fragment,e),Z(Ee.$$.fragment,e),qe=!1},d(e){e&&d(t),ee(o),ee(he),ee(we),ee(be),ee(Ee),je&&je.d()}}}function ql(e){let t,n,l,o,a,i,s,f,y,b,$,x,k,A,S;t=new xe({props:{click:e[3]}}),f=new qt({props:{crew:e[0],print:"true"}});let C=e[0].members,E=[];for(let t=0;t<C.length;t+=1)E[t]=Ll(Rl(e,C,t));const T=e=>Z(E[e],1,1,(()=>{E[e]=null}));return{c(){Y(t.$$.fragment),n=g(),l=p("div"),o=p("button"),o.textContent="Back",a=g(),i=p("button"),i.textContent="Print",s=g(),Y(f.$$.fragment),y=g(),b=p("div"),$=g();for(let e=0;e<E.length;e+=1)E[e].c();x=h(),w(l,"class","no-print"),w(b,"class","pagebreak")},m(r,d){Q(t,r,d),u(r,n,d),u(r,l,d),c(l,o),c(l,a),c(l,i),u(r,s,d),Q(f,r,d),u(r,y,d),u(r,b,d),u(r,$,d);for(let e=0;e<E.length;e+=1)E[e].m(r,d);u(r,x,d),k=!0,A||(S=[v(o,"click",e[4]),v(i,"click",e[5])],A=!0)},p(e,[t]){const n={};if(1&t&&(n.crew=e[0]),f.$set(n),1&t){let n;for(C=e[0].members,n=0;n<C.length;n+=1){const l=Rl(e,C,n);E[n]?(E[n].p(l,t),K(E[n],1)):(E[n]=Ll(l),E[n].c(),K(E[n],1),E[n].m(x.parentNode,x))}for(z(),n=C.length;n<E.length;n+=1)T(n);F()}},i(e){if(!k){K(t.$$.fragment,e),K(f.$$.fragment,e);for(let e=0;e<C.length;e+=1)K(E[e]);k=!0}},o(e){Z(t.$$.fragment,e),Z(f.$$.fragment,e),E=E.filter(Boolean);for(let e=0;e<E.length;e+=1)Z(E[e]);k=!1},d(e){ee(t,e),e&&d(n),e&&d(l),e&&d(s),ee(f,e),e&&d(y),e&&d(b),e&&d($),m(E,e),e&&d(x),A=!1,r(S)}}}let _l=!1;function Ml(e,t,n){let{params:l={}}=t,r="new"===l.crew?lt("",0):ye.crews.find((e=>e.id===l.crew));r=ul.validateModel(r);De.filter((e=>"Leader"!==e.name));function o(){var e=ye.crews.findIndex((e=>e.id===r.id));-1!==e?ye.crews.splice(e,1,r):ye.crews.push(r),ye.save(ye.crews)}return e.$$set=e=>{"params"in e&&n(2,l=e.params)},[r,o,l,()=>o(),()=>pe("/crew/"+r.id+"/edit"),()=>window.print(),function(e,t){t.notes=e,n(0,r)}]}var Wl=[{name:"Vermin Swarm",actions:"Threat Level",move:6,combatAbility:4,armor:2,will:4,weapon:0,spawn:[{tl:1,roll:1,count:"1",anomaly:!1},{tl:1,roll:2,count:"2",anomaly:!1}]},{name:"Vermin Swarm (X2)",actions:"Threat Level",move:6,combatAbility:4,armor:2,will:4,weapon:0,spawn:[{tl:2,roll:1,count:"1",anomaly:!1}]},{name:"Feral Dogs",actions:"Threat Level",move:8,combatAbility:4,armor:2,will:4,weapon:0,spawn:[{tl:1,roll:3,count:"4",anomaly:!1},{tl:2,roll:2,count:"6",anomaly:!1},{tl:3,roll:1,count:"6",anomaly:!1}]},{name:"Zombies",actions:"Threat Level",move:4,combatAbility:4,armor:6,will:0,weapon:0,spawn:[{tl:1,roll:4,count:"4",anomaly:!1},{tl:2,roll:3,count:"6",anomaly:!1},{tl:3,roll:2,count:"8",anomaly:!1}]},{name:"Rad Ghoul",actions:"Threat Level",move:7,combatAbility:5,armor:4,will:6,weapon:1,spawn:[{tl:1,roll:5,count:"4",anomaly:!1},{tl:2,roll:4,count:"6",anomaly:!1},{tl:3,roll:3,count:"6",anomaly:!1}]},{name:"Bandit",actions:"Threat Level",move:6,combatAbility:5,armor:5,will:6,weapon:"Ranged/Melee as modeled",spawn:[{tl:1,roll:6,count:"4",anomaly:!0},{tl:2,roll:5,count:"4",anomaly:!0},{tl:3,roll:4,count:"4",anomaly:!0}]},{name:"Mutant",actions:"Threat Level",move:6,combatAbility:"4-6",armor:"4-6",will:6,weapon:1,spawn:[{tl:2,roll:6,count:"1",anomaly:!0},{tl:3,roll:5,count:"2",anomaly:!0}]},{name:"Large Mutant",actions:"Threat Level",move:6,combatAbility:"5-7",armor:"5-7",will:7,weapon:2,spawn:[{tl:3,roll:6,count:"1",anomaly:!0}]}],Nl=[{1:{salvage:200,anomaly:!1},2:{salvage:350,anomaly:!1},3:{salvage:500,anomaly:!1}},{1:{salvage:350,anomaly:!1},2:{salvage:500,anomaly:!1},3:{salvage:750,anomaly:!1}},{1:{salvage:500,anomaly:!1},2:{salvage:750,anomaly:!1},3:{salvage:1e3,anomaly:!1}},{1:{salvage:200,rolls:[{table:"Basic",count:1}],anomaly:!1},2:{salvage:500,rolls:[{table:"Basic",count:2}],anomaly:!1},3:{salvage:750,rolls:[{table:"Advanced",count:2}],anomaly:!0}},{1:{salvage:350,rolls:[{table:"Basic",count:1}],anomaly:!1},2:{salvage:750,rolls:[{table:"Basic",count:2}],anomaly:!0},3:{salvage:1e3,rolls:[{table:"Advanced",count:2}],anomaly:!0}},{1:{salvage:500,rolls:[{table:"Basic",count:1}],anomaly:!0},2:{salvage:1e3,rolls:[{table:"Advanced",count:1}],anomaly:!0},3:{salvage:2e3,rolls:[{table:"Advanced",count:1},{table:"Special",count:1}],anomaly:!0}}],Bl=[{value:2e3,bonus:""},{value:3500,bonus:""},{value:4500,bonus:""},{value:2e3,bonus:'+1" Movement'},{value:3500,bonus:"+1 Armor"},{value:4500,bonus:"+1 Will"}];function Ol(e,t,n){const l=e.slice();return l[8]=t[n],l[2]=n,l}function Hl(e,t,n){const l=e.slice();return l[10]=t[n],l[12]=n,l}function Il(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function Dl(e,t,n){const l=e.slice();return l[2]=t[n],l}function Gl(e,t,n){const l=e.slice();return l[18]=t[n],l[12]=n,l}function Pl(e,t,n){const l=e.slice();return l[13]=t[n],l[12]=n,l}function jl(e,t,n){const l=e.slice();return l[18]=t[n],l}function Jl(t){let n,l,r,o,a,i,s=t[0](t[18],t[12]+1).anomaly,m=t[18].name+"",h=t[0](t[18],t[12]+1).count+"",v=t[0](t[18],t[12]+1).anomaly,y=s&&function(e){let t;return{c(){t=p("span"),t.textContent="",w(t,"class","warning svelte-ceyy3n")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}(),b=v&&function(e){let t,n;return{c(){t=f("+ "),n=p("span"),n.textContent="Anomaly",w(n,"class","listHeader")},m(e,l){u(e,t,l),u(e,n,l)},d(e){e&&d(t),e&&d(n)}}}();return{c(){n=p("td"),y&&y.c(),l=g(),r=f(m),o=f(" ("),a=f(h),i=f(")\n            "),b&&b.c(),w(n,"class",(t[12]%2==0?"even":"")+" "+(t[0](t[18],t[12]+1).anomaly?"anomaly":"")+" svelte-ceyy3n")},m(e,t){u(e,n,t),y&&y.m(n,null),c(n,l),c(n,r),c(n,o),c(n,a),c(n,i),b&&b.m(n,null)},p:e,d(e){e&&d(n),y&&y.d(),b&&b.d()}}}function zl(e){let t,n,l,r,o,a=e[12]+1+"",i=e[2](e[12]+1),h=[];for(let t=0;t<i.length;t+=1)h[t]=Jl(jl(e,i,t));return{c(){t=p("tr"),n=p("td"),l=f(a),r=g();for(let e=0;e<h.length;e+=1)h[e].c();o=g(),w(n,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n")},m(e,a){u(e,t,a),c(t,n),c(n,l),c(t,r);for(let e=0;e<h.length;e+=1)h[e].m(t,null);c(t,o)},p(e,n){if(5&n){let l;for(i=e[2](e[12]+1),l=0;l<i.length;l+=1){const r=jl(e,i,l);h[l]?h[l].p(r,n):(h[l]=Jl(r),h[l].c(),h[l].m(t,o))}for(;l<h.length;l+=1)h[l].d(1);h.length=i.length}},d(e){e&&d(t),m(h,e)}}}function Fl(t){let n;return{c(){n=f("Threat Level")},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function Kl(t){let n,l=t[18].actions+"";return{c(){n=f(l)},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function Zl(e){let t,n,l,r,o,a,i,m,h,v,y,b,$,x,k,A,S,C,E,T,R,L=e[18].name+"",q=e[18].move+"",_=e[18].combatAbility+"",M=e[18].armor+"",W=e[18].will+"",N=e[1](e[18].weapon)+"";let B=function(e,t){return e[18].actions?Kl:Fl}(e)(e);return{c(){t=p("tr"),n=p("td"),l=f(L),r=g(),o=p("td"),B.c(),a=g(),i=p("td"),m=f(q),h=g(),v=p("td"),y=f(_),b=g(),$=p("td"),x=f(M),k=g(),A=p("td"),S=f(W),C=g(),E=p("td"),T=f(N),R=g(),w(n,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n"),w(o,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n"),w(i,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n"),w(v,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n"),w($,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n"),w(A,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n"),w(E,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n")},m(e,s){u(e,t,s),c(t,n),c(n,l),c(t,r),c(t,o),B.m(o,null),c(t,a),c(t,i),c(i,m),c(t,h),c(t,v),c(v,y),c(t,b),c(t,$),c($,x),c(t,k),c(t,A),c(A,S),c(t,C),c(t,E),c(E,T),c(t,R)},p(e,t){B.p(e,t)},d(e){e&&d(t),B.d()}}}function Vl(t){let n,l,r,o,a,i,s=t[2].count+"",c=t[2].table+"";return{c(){n=p("br"),l=g(),r=f(s),o=f(" D6 roll on "),a=f(c),i=f(" Equipment Table")},m(e,t){u(e,n,t),u(e,l,t),u(e,r,t),u(e,o,t),u(e,a,t),u(e,i,t)},p:e,d(e){e&&d(n),e&&d(l),e&&d(r),e&&d(o),e&&d(a),e&&d(i)}}}function Ul(e){let t,n,l,r,o=e[10][e[15]+1].salvage+"",a=e[10][e[15]+1].anomaly&&function(e){let t,n,l,r;return{c(){t=p("span"),t.textContent="",n=g(),l=p("span"),l.textContent="Anomaly",r=p("br"),w(t,"class","warning svelte-ceyy3n"),w(l,"class","listHeader")},m(e,o){u(e,t,o),u(e,n,o),u(e,l,o),u(e,r,o)},d(e){e&&d(t),e&&d(n),e&&d(l),e&&d(r)}}}(),i=e[10][e[15]+1].rolls&&function(e){let t,n=e[10][e[15]+1].rolls,l=[];for(let t=0;t<n.length;t+=1)l[t]=Vl(Dl(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=h()},m(e,n){for(let t=0;t<l.length;t+=1)l[t].m(e,n);u(e,t,n)},p(e,r){if(0&r){let o;for(n=e[10][e[15]+1].rolls,o=0;o<n.length;o+=1){const a=Dl(e,n,o);l[o]?l[o].p(a,r):(l[o]=Vl(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(e){m(l,e),e&&d(t)}}}(e);return{c(){t=p("td"),a&&a.c(),n=f("\n            Salvage worth "),l=f(o),r=g(),i&&i.c(),w(t,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n")},m(e,o){u(e,t,o),a&&a.m(t,null),c(t,n),c(t,l),c(t,r),i&&i.m(t,null)},p(e,t){e[10][e[15]+1].rolls&&i.p(e,t)},d(e){e&&d(t),a&&a.d(),i&&i.d()}}}function Xl(e){let t,n,l,r,o,a=e[12]+1+"",i=Array(3),h=[];for(let t=0;t<i.length;t+=1)h[t]=Ul(Il(e,i,t));return{c(){t=p("tr"),n=p("td"),l=f(a),r=g();for(let e=0;e<h.length;e+=1)h[e].c();o=g(),w(n,"class",s(e[12]%2==0?"even":"")+" svelte-ceyy3n")},m(e,a){u(e,t,a),c(t,n),c(n,l),c(t,r);for(let e=0;e<h.length;e+=1)h[e].m(t,null);c(t,o)},p(e,n){if(0&n){let l;for(i=Array(3),l=0;l<i.length;l+=1){const r=Il(e,i,l);h[l]?h[l].p(r,n):(h[l]=Ul(r),h[l].c(),h[l].m(t,o))}for(;l<h.length;l+=1)h[l].d(1);h.length=i.length}},d(e){e&&d(t),m(h,e)}}}function Yl(t){let n,l,r,o,a,i,m,h,v,y,b=t[2]+1+"",$=t[8].value+"",x=t[8].bonus+"";return{c(){n=p("tr"),l=p("td"),r=f(b),o=g(),a=p("td"),i=f($),m=g(),h=p("td"),v=f(x),y=g(),w(l,"class",s(t[2]%2==0?"even":"")+" svelte-ceyy3n"),w(a,"class",s(t[2]%2==0?"even":"")+" svelte-ceyy3n"),w(h,"class",s(t[2]%2==0?"even":"")+" svelte-ceyy3n")},m(e,t){u(e,n,t),c(n,l),c(l,r),c(n,o),c(n,a),c(a,i),c(n,m),c(n,h),c(h,v),c(n,y)},p:e,d(e){e&&d(n)}}}function Ql(e){let t,n,l,r,o,a,i,s,f,h,v,y,b,$,x,k,A,S,C,E,T,R,L,q,_,M,W,N,B,O,H;t=new xe({});let I=Array(6),D=[];for(let t=0;t<I.length;t+=1)D[t]=zl(Pl(e,I,t));let G=Wl,P=[];for(let t=0;t<G.length;t+=1)P[t]=Zl(Gl(e,G,t));let j=Nl,J=[];for(let t=0;t<j.length;t+=1)J[t]=Xl(Hl(e,j,t));let z=Bl,F=[];for(let t=0;t<z.length;t+=1)F[t]=Yl(Ol(e,z,t));return{c(){Y(t.$$.fragment),n=g(),l=p("div"),r=p("h2"),r.textContent="Hostiles",o=g(),a=p("h3"),a.textContent="Spawn",i=g(),s=p("table"),f=p("tr"),f.innerHTML='<th class="roll svelte-ceyy3n">D6 Roll</th> \n      <th class="threatLevel svelte-ceyy3n">Threat Level 1 Blue</th> \n      <th class="threatLevel svelte-ceyy3n">Threat Level 2 Yellow</th> \n      <th class="threatLevel svelte-ceyy3n">Threat Level 3 Red</th>',h=g();for(let e=0;e<D.length;e+=1)D[e].c();v=g(),y=p("h3"),y.textContent="Stats",b=g(),$=p("table"),x=p("tr"),x.innerHTML='<th class="hostile svelte-ceyy3n">Name</th> \n      <th class="hostile svelte-ceyy3n">Actions</th> \n      <th class="hostile svelte-ceyy3n">Move</th> \n      <th class="hostile svelte-ceyy3n">Combat Ability</th> \n      <th class="hostile svelte-ceyy3n">Armor</th> \n      <th class="hostile svelte-ceyy3n">Will</th> \n      <th class="hostile svelte-ceyy3n">Weapon<br/>(Range | Firepower | Damage)</th>',k=g();for(let e=0;e<P.length;e+=1)P[e].c();A=g(),S=p("h2"),S.textContent="Loot",C=g(),E=p("h3"),E.textContent="Salvage",T=g(),R=p("table"),L=p("tr"),L.innerHTML='<th class="roll svelte-ceyy3n">D6 Roll</th> \n      <th class="threatLevel svelte-ceyy3n">Threat Level 1 Blue</th> \n      <th class="threatLevel svelte-ceyy3n">Threat Level 2 Yellow</th> \n      <th class="threatLevel svelte-ceyy3n">Threat Level 3 Red</th>',q=g();for(let e=0;e<J.length;e+=1)J[e].c();_=g(),M=p("h3"),M.textContent="Artifacts",W=g(),N=p("table"),B=p("tr"),B.innerHTML="<th>D6 Roll</th> \n      <th>Value</th> \n      <th>Bonus</th>",O=g();for(let e=0;e<F.length;e+=1)F[e].c();w(s,"class","fixedTable svelte-ceyy3n"),w($,"class","fixedTable svelte-ceyy3n"),w(R,"class","fixedTable svelte-ceyy3n"),w(N,"class","fixedTable svelte-ceyy3n")},m(e,d){Q(t,e,d),u(e,n,d),u(e,l,d),c(l,r),c(l,o),c(l,a),c(l,i),c(l,s),c(s,f),c(s,h);for(let e=0;e<D.length;e+=1)D[e].m(s,null);c(l,v),c(l,y),c(l,b),c(l,$),c($,x),c($,k);for(let e=0;e<P.length;e+=1)P[e].m($,null);c(l,A),c(l,S),c(l,C),c(l,E),c(l,T),c(l,R),c(R,L),c(R,q);for(let e=0;e<J.length;e+=1)J[e].m(R,null);c(l,_),c(l,M),c(l,W),c(l,N),c(N,B),c(N,O);for(let e=0;e<F.length;e+=1)F[e].m(N,null);H=!0},p(e,[t]){if(5&t){let n;for(I=Array(6),n=0;n<I.length;n+=1){const l=Pl(e,I,n);D[n]?D[n].p(l,t):(D[n]=zl(l),D[n].c(),D[n].m(s,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=I.length}if(2&t){let n;for(G=Wl,n=0;n<G.length;n+=1){const l=Gl(e,G,n);P[n]?P[n].p(l,t):(P[n]=Zl(l),P[n].c(),P[n].m($,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=G.length}if(0&t){let n;for(j=Nl,n=0;n<j.length;n+=1){const l=Hl(e,j,n);J[n]?J[n].p(l,t):(J[n]=Xl(l),J[n].c(),J[n].m(R,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=j.length}if(0&t){let n;for(z=Bl,n=0;n<z.length;n+=1){const l=Ol(e,z,n);F[n]?F[n].p(l,t):(F[n]=Yl(l),F[n].c(),F[n].m(N,null))}for(;n<F.length;n+=1)F[n].d(1);F.length=z.length}},i(e){H||(K(t.$$.fragment,e),H=!0)},o(e){Z(t.$$.fragment,e),H=!1},d(e){ee(t,e),e&&d(n),e&&d(l),m(D,e),m(P,e),m(J,e),m(F,e)}}}function er(e){let t=e=>e.range.min+"-"+e.range.max,n=e=>e.firepower.value+(e.firepower.per?"/":"")+e.firepower.per,l=e=>e.damage.value+(e.damage.per?"/":"")+e.damage.per,r=e=>(e.damage.template?", ":"")+e.damage.template,o=e=>(e.rules.length>0?" | ":"")+e.rules.join(",");return[(e,t)=>e.spawn.find((e=>e.roll===t)),e=>{let a=je.find((t=>t.id===e));return a?t(a)+" | "+n(a)+" | "+l(a)+r(a)+o(a):e},e=>Wl.filter((t=>t.spawn.filter((t=>t.roll===e)).length>0))]}function tr(e){let t,n,l,a,i,s,m,f,h,w,y;return t=new xe({}),{c(){Y(t.$$.fragment),n=g(),l=p("div"),a=p("span"),a.textContent="Paste either crew json or crew hash (export string).",i=g(),s=p("input"),m=g(),f=p("button"),f.textContent="Import"},m(r,d){Q(t,r,d),u(r,n,d),u(r,l,d),c(l,a),c(l,i),c(l,s),$(s,e[0]),c(l,m),c(l,f),h=!0,w||(y=[v(s,"input",e[2]),v(f,"click",(function(){o(e[1](e[0]))&&e[1](e[0]).apply(this,arguments)}))],w=!0)},p(t,[n]){e=t,1&n&&s.value!==e[0]&&$(s,e[0])},i(e){h||(K(t.$$.fragment,e),h=!0)},o(e){Z(t.$$.fragment,e),h=!1},d(e){ee(t,e),e&&d(n),e&&d(l),w=!1,r(y)}}}function nr(e,t,n){let l,r;return[l,()=>{r=ye.importCrew(l),r&&pe("/crew/"+r.id+"/edit")},function(){l=this.value,n(0,l)}]}var lr={"/":class extends ne{constructor(e){super(),te(this,e,Ce,Se,a,{})}},"/tables":class extends ne{constructor(e){super(),te(this,e,er,Ql,a,{})}},"/crew/:crew/edit":Tl,"/crew/:crew/view":Tl,"/print/:crew":class extends ne{constructor(e){super(),te(this,e,Ml,ql,a,{params:2})}},"/import":class extends ne{constructor(e){super(),te(this,e,nr,tr,a,{})}}};function rr(t){let n,l,r,o,a,i,s;return o=new he({props:{routes:lr}}),{c(){n=p("main"),l=p("h1"),l.textContent="Zona Alfa Crew Builder",r=g(),Y(o.$$.fragment),a=g(),i=p("div"),i.innerHTML='<div><a href="https://ospreypublishing.com/zona-alfa?___store=osprey_rst" title="Zona Alfa" target="_blank">Zona\n        Alfa</a>  <a href="https://ospreypublishing.com/" title="Osprey Publishing" target="_blank">Osprey\n      Publishing</a></div> \n    <div class="no-print">Resources:\n      <a href="https://www.reddit.com/r/ZonaAlfa/" title="r/ZonaAlfa" target="_blank">r/ZonaAlfa</a> |\n      <a href="https://boardgamegeek.com/boardgame/284981/zona-alfa-salvage-and-survival-exclusion-zone" title="Zona Alfa BGG" target="_blank">Zona Alfa BGG</a> |\n      <a href="https://ospreypublishing.com/gaming-resources-owg#zonaalfa" title="Gaming Resources" target="_blank">Gaming\n        Resources</a></div> \n    <div class="no-print">Icons made by\n      <a href="https://creativemarket.com/eucalyp" title="Eucalyp" target="_blank">Eucalyp</a>,\n      <a href="https://www.flaticon.com/authors/becris" title="Becris" target="_blank">Becris</a>,\n      <a href="https://www.freepik.com" title="Freepik" target="_blank">Freepik</a> \n      <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect" target="_blank">Pixel perfect</a>\n      from <a href="https://www.flaticon.com/" title="Flaticon" target="_blank">www.flaticon.com</a></div>',w(l,"class","no-print svelte-5a9xbx"),w(i,"class","footer svelte-5a9xbx"),w(n,"class","svelte-5a9xbx")},m(e,t){u(e,n,t),c(n,l),c(n,r),Q(o,n,null),c(n,a),c(n,i),s=!0},p:e,i(e){s||(K(o.$$.fragment,e),s=!0)},o(e){Z(o.$$.fragment,e),s=!1},d(e){e&&d(n),ee(o)}}}return new class extends ne{constructor(e){super(),te(this,e,null,rr,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
